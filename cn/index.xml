<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Horaedb on Apache HoraeDB</title><link>https://horaedb.apache.org/cn/</link><description>Recent content in Horaedb on Apache HoraeDB</description><generator>Hugo</generator><language>cn</language><atom:link href="https://horaedb.apache.org/cn/index.xml" rel="self" type="application/rss+xml"/><item><title>快速开始</title><link>https://horaedb.apache.org/cn/docs/getting-started/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/getting-started/</guid><description>&lt;p>本章介绍如何快速启动 HoraeDB。在这里你将会学到启动一个单机模式的 HoraeDB，然后使用 SQL 写入一些数据并查询结果。&lt;/p>
&lt;h2 id="启动">启动&lt;/h2>
&lt;p>使用 &lt;a href="https://github.com/apache/incubator-horaedb/pkgs/container/horaedb-server">HoraeDB docker 镜像&lt;/a> 是一种最简单的启动方式；如果你还没有安装 Docker，请首先参考 &lt;a href="https://www.docker.com/products/docker-desktop/">这里&lt;/a> 安装 Docker。&lt;/p>
&lt;blockquote>
&lt;p>注意：请选择一个大于等于 v1.0.0 的 tag 镜像。&lt;/p>
&lt;/blockquote>
&lt;p>使用如下命令安装并启动一个单机版 HoraeDB。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -d --name horaedb-server &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span> -p 8831:8831 &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span> -p 3307:3307 &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span> -p 5440:5440 &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span> ghcr.io/apache/horaedb-server:nightly-20231222-f57b3827
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>启动后 HoraeDB 会监听如下端口：&lt;/p>
&lt;ul>
&lt;li>8831, gRPC port&lt;/li>
&lt;li>3307, MySQL port&lt;/li>
&lt;li>5440, HTTP port&lt;/li>
&lt;/ul>
&lt;p>&lt;code>HTTP&lt;/code> 协议是最简单的交互方式，接下来的演示会使用 &lt;code>HTTP&lt;/code> 协议进行介绍。不过在生产环境，我们推荐使用 &lt;code>gRPC/MySQL&lt;/code>。&lt;/p></description></item><item><title>HoraeDB 架构介绍</title><link>https://horaedb.apache.org/cn/docs/design/architecture/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/architecture/</guid><description>&lt;h2 id="本文目标">本文目标&lt;/h2>
&lt;ul>
&lt;li>为想了解更多关于 HoraeDB 但不知道从何入手的开发者提供 HoraeDB 的概览&lt;/li>
&lt;li>简要介绍 HoraeDB 的主要模块以及这些模块之间的联系，但不涉及它们实现的细节&lt;/li>
&lt;/ul>
&lt;h2 id="动机">动机&lt;/h2>
&lt;p>HoraeDB 是一个时序数据库，与经典时序数据库相比，HoraeDB 的目标是能够同时处理时序型和分析型两种模式的数据，并提供高效的读写。&lt;/p>
&lt;p>在经典的时序数据库中，&lt;code>Tag&lt;/code> 列（ &lt;code>InfluxDB&lt;/code> 称之为 &lt;code>Tag&lt;/code>，&lt;code>Prometheus&lt;/code> 称之为 &lt;code>Label&lt;/code>）通常会对其生成倒排索引，但在实际使用中，&lt;code>Tag&lt;/code> 的基数在不同的场景中是不一样的 ———— 在某些场景下，&lt;code>Tag&lt;/code> 的基数非常高（这种场景下的数据，我们称之为分析型数据），而基于倒排索引的读写要为此付出很高的代价。而另一方面，分析型数据库常用的扫描 + 剪枝方法，可以比较高效地处理这样的分析型数据。&lt;/p>
&lt;p>因此 HoraeDB 的基本设计理念是采用混合存储格式和相应的查询方法，从而达到能够同时高效处理时序型数据和分析型数据。&lt;/p>
&lt;h2 id="架构">架构&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span>┌──────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ RPC Layer (HTTP/gRPC/MySQL) │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└──────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌──────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ SQL Layer │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ┌─────────────────┐ ┌─────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │ Parser │ │ Planner │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ └─────────────────┘ └─────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└──────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌───────────────────┐ ┌───────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ Interpreter │ │ Catalog │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└───────────────────┘ └───────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌──────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ Query Engine │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ┌─────────────────┐ ┌─────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │ Optimizer │ │ Executor │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ └─────────────────┘ └─────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└──────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌──────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ Pluggable Table Engine │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ┌────────────────────────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │ Analytic │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │┌────────────────┐┌────────────────┐│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ││ Wal ││ Memtable ││ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │└────────────────┘└────────────────┘│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │┌────────────────┐┌────────────────┐│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ││ Flush ││ Compaction ││ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │└────────────────┘└────────────────┘│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │┌────────────────┐┌────────────────┐│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ││ Manifest ││ Object Store ││ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │└────────────────┘└────────────────┘│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ └────────────────────────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ Another Table Engine │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└──────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上图展示了 HoraeDB 单机版本的架构，下面将会介绍重要模块的细节。&lt;/p></description></item><item><title>支持平台</title><link>https://horaedb.apache.org/cn/docs/dev/platform/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/dev/platform/</guid><description>&lt;p>作为一个开源的数据库，HoraeDB 可以部署在基于英特尔 /ARM 架构的服务器，以及常见的虚拟环境。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: center">OS&lt;/th>
 &lt;th style="text-align: center">status&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: center">Ubuntu LTS 16.06 or later&lt;/td>
 &lt;td style="text-align: center">✅&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">CentOS 7.3 or later&lt;/td>
 &lt;td style="text-align: center">✅&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">Red Hat Enterprise Linux 7.3 or later 7.x releases&lt;/td>
 &lt;td style="text-align: center">✅&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">macOS 11 or later&lt;/td>
 &lt;td style="text-align: center">✅&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">Windows&lt;/td>
 &lt;td style="text-align: center">❌&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>生产环境下 , Linux 是首选平台。&lt;/li>
&lt;li>macOS 主要用在开发环境。&lt;/li>
&lt;/ul></description></item><item><title>编译</title><link>https://horaedb.apache.org/cn/docs/dev/compile_run/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/dev/compile_run/</guid><description>&lt;p>为了编译 HoraeDB, 首先需要安装相关的依赖（包括 &lt;code>Rust&lt;/code> 的工具链)。&lt;/p>
&lt;h1 id="依赖">依赖&lt;/h1>
&lt;h2 id="ubuntu">Ubuntu&lt;/h2>
&lt;p>假设我们的开发环境是 Ubuntu20.04, 可以执行如下命令来安装所需的依赖。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt install git curl gcc g++ libssl-dev pkg-config protobuf-compiler
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="macos">macOS&lt;/h2>
&lt;p>如果你的开发环境是 &lt;code>MacOS&lt;/code> ，可以使用如下命令手动安装这些依赖项的高版本。&lt;/p>
&lt;ol>
&lt;li>安装命令行工具：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>xcode-select --install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>安装 protobuf:&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>brew install protobuf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="rust">Rust&lt;/h1>
&lt;p>&lt;code>Rust&lt;/code> 可以使用 &lt;a href="https://rustup.rs/">rustup&lt;/a> 来安装。
安装 &lt;code>Rust&lt;/code> 后，进入 HoraeDB 工程目录，根据工具链文件指定的 &lt;code>Rust&lt;/code> 版本会被自动下载。&lt;/p>
&lt;p>执行后，你需要添加环境变量来使用 &lt;code>Rust&lt;/code> 工具链。只要把下面的命令放到你的&lt;code>~/.bashrc&lt;/code>或&lt;code>~/.bash_profile&lt;/code>中即可。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000">source&lt;/span> &lt;span style="color:#19177c">$HOME&lt;/span>/.cargo/env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="编译运行">编译运行&lt;/h1>
&lt;p>编译 HoraeDB 命令如下:&lt;/p></description></item><item><title>性能诊断</title><link>https://horaedb.apache.org/cn/docs/dev/profiling/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/dev/profiling/</guid><description>&lt;h3 id="cpu-剖析">CPU 剖析&lt;/h3>
&lt;p>HoraeDB 提供 CPU 剖析 http 接口 &lt;code>debug/profile/cpu&lt;/code>.&lt;/p>
&lt;p>例子:&lt;/p>
&lt;pre tabindex="0">&lt;code>// 60s CPU 采样数据
curl 0:5000/debug/profile/cpu/60

// 产出文件
/tmp/flamegraph_cpu.svg
&lt;/code>&lt;/pre>&lt;h3 id="内存剖析">内存剖析&lt;/h3>
&lt;p>HoraeDB 提供内存剖析 http 接口 &lt;code>debug/profile/heap&lt;/code>.&lt;/p>
&lt;h3 id="安装依赖">安装依赖&lt;/h3>
&lt;pre tabindex="0">&lt;code>sudo yum install -y jemalloc-devel ghostscript graphviz
&lt;/code>&lt;/pre>&lt;p>例子:&lt;/p>
&lt;pre tabindex="0">&lt;code>// 开启 malloc prof
export MALLOC_CONF=prof:true

// 运行 horaedb-server
./horaedb-server ....

// 60s 内存采样数据
curl -L &amp;#39;0:5000/debug/profile/heap/60&amp;#39; &amp;gt; /tmp/heap_profile
jeprof --show_bytes --pdf /usr/bin/horaedb-server /tmp/heap_profile &amp;gt; profile_heap.pdf

jeprof --show_bytes --svg /usr/bin/horaedb-server /tmp/heap_profile &amp;gt; profile_heap.svg
&lt;/code>&lt;/pre></description></item><item><title>标识符</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/identifier/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/identifier/</guid><description>&lt;p>HoraeDB 中表名、列名等标识符不能是保留关键字或以数字和标点符号开始，不过 HoraeDB 允许用反引号引用标识符（`）。在这种情况下，它可以是任何字符串，如 &lt;code>00_table&lt;/code> 或 &lt;code>select&lt;/code>。&lt;/p></description></item><item><title>集群模式</title><link>https://horaedb.apache.org/cn/docs/design/clustering/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/clustering/</guid><description>&lt;p>注意：文章中提到的部分特性暂时还未实现。&lt;/p>
&lt;h2 id="整体架构">整体架构&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span>┌───────────────────────────────────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ HoraeMeta Cluster │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└───────────────────────────────────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ▲ ▲ ▲
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ▼ ▼ ▼
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌───────┐Route Info ┌HoraeDB─────┬┬─┐ ┌HoraeDB─────┬┬─┐ ┌HoraeDB─────┬┬─┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│client │◀────────▶ │ │ │TableN││ │ │ │ │TableN││ │ │ │ │TableN││ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└───────┘Write/Query└──Shard(L)──┴┴─┘ └──Shard(F)──┴┴─┘ └──Shard(F)──┴┴─┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ▲ ▲
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ Write─────────┐ ├────Sync───────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ ┌────────┬▼───┴────┬──────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Upload SST │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │WAL │Region N │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │Service │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ └────────┴─────────┴──────────────────┘
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ▼
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>┌───────────────────────────────────────────────────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ Object Storage │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>│ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>└───────────────────────────────────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面给出来 HoraeDB 集群化方案的整体架构图，对于其中的一些名词做出解释：&lt;/p></description></item><item><title>RoadMap</title><link>https://horaedb.apache.org/cn/docs/dev/roadmap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/dev/roadmap/</guid><description>&lt;h3 id="v010">v0.1.0&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持基于本地磁盘的 Standalone 版本&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持分析存储格式&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持 SQL&lt;/li>
&lt;/ul>
&lt;h3 id="v020">v0.2.0&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 静态路由的分布式版本&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 远端存储支持阿里云 OSS&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持基于 &lt;a href="https://github.com/oceanbase/oceanbase">OBKV&lt;/a>的 WAL&lt;/li>
&lt;/ul>
&lt;h3 id="v030">v0.3.0&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 发布多语言客户端，包括 Java, Rust 和 Python&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持使用 &lt;code>HoraeMeta&lt;/code> 的静态集群&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 混合存储格式基本实现&lt;/li>
&lt;/ul>
&lt;h3 id="v040">v0.4.0&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 实现更复杂的集群方案，增强 HoraeDB 的可靠性和可扩展性&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 构建日常运行的、基于 TSBS 的压测任务&lt;/li>
&lt;/ul>
&lt;h3 id="v100-alpha-released">v1.0.0-alpha (Released)&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 基于 &lt;code>Apache Kafka&lt;/code> 实现分布式 WAL&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 发布 Golang 客户端&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 优化时序场景下的查询性能&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 支持集群模式下表的动态转移&lt;/li>
&lt;/ul>
&lt;h3 id="v100">v1.0.0&lt;/h3>
&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 正式发布 HoraeDB 和相关 SDK，并完成所有的 breaking changes&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 完成分区表的主要工作&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 优化查询性能，特别是云原生集群模式下，包括：
&lt;ul>
&lt;li>多级缓存&lt;/li>
&lt;li>多种方式减少从远端获取的数据量(提高 SST 数据过滤精度)&lt;/li>
&lt;li>提高获取远程对象存储数据的并发度&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> 通过控制合并时的资源消耗，提高数据写入性能&lt;/li>
&lt;/ul>
&lt;h3 id="afterwards">Afterwards&lt;/h3>
&lt;p>随着对时序数据库及其各种使用情况的深入了解，我们的大部分工作将聚焦在性能、可靠性、可扩展性、易用性以及与开源社区的合作方面&lt;/p></description></item><item><title>存储引擎</title><link>https://horaedb.apache.org/cn/docs/design/storage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/storage/</guid><description>&lt;p>存储引擎主要提供以下两个功能：&lt;/p>
&lt;ol>
&lt;li>数据的持久化&lt;/li>
&lt;li>在保证数据正确性的前提下，用最合理的方式来组织数据，来满足不同场景的查询需求&lt;/li>
&lt;/ol>
&lt;p>本篇文档就来介绍 HoraeDB 中存储引擎的内部实现，读者可以参考这里面的内容，来探索如何高效使用 HoraeDB。&lt;/p>
&lt;h1 id="整体架构">整体架构&lt;/h1>
&lt;p>HoraeDB 是一种基于 share-nothing 架构的分布式存储系统，不同服务器之间的数据相互隔离，互不影响。每一个单机中的存储引擎是 LSM（Log-structured merge-tree）的一个变种，针对时序场景做了优化，下图展示了其主要组件的运作方式：&lt;/p>
&lt;p>&lt;img src="https://horaedb.apache.org/images/storage-overview.svg">&lt;/p>
&lt;h2 id="write-ahead-log-wal">Write Ahead Log (WAL)&lt;/h2>
&lt;p>一次写入请求的数据会写到两个部分：&lt;/p>
&lt;ol>
&lt;li>内存中的 memtable&lt;/li>
&lt;li>可持久化的 WAL&lt;/li>
&lt;/ol>
&lt;p>由于 memtable 不是实时持久化到底层存储系统，因此需要用 WAL 来保证 memtable 中数据的可靠性。&lt;/p>
&lt;p>另一方面，由于&lt;a href="cluster.md">分布式架构&lt;/a>的设计，要求 WAL 本身是高可用的，现在 HoraeDB 中，主要有以下几种实现：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://horaedb.apache.org/cn/docs/design/wal_on_rocksdb/">本地磁盘&lt;/a>（基于 &lt;a href="http://rocksdb.org/">RocksDB&lt;/a>，无分布式高可用）&lt;/li>
&lt;li>&lt;a href="https://www.oceanbase.com">Oceanbase&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://horaedb.apache.org/cn/docs/design/wal_on_kafka/">Kafka&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="memtable">Memtable&lt;/h2>
&lt;p>Memtable 是一个内存的数据结构，用来保存最近写入的数据。一个表对应一个 memtable。&lt;/p>
&lt;p>Memtable 默认是可读写的（称为 active），当写入达到一起阈值时，会变成只读的并且被一个新的 memtable 替换掉。只读的 memtable 会被后台线程以 SST 的形式写入到底层存储系统中，写入完成后，只读的 memtable 就可以被销毁，同时 WAL 中也可以删除对应部分的数据。&lt;/p>
&lt;h2 id="sorted-string-tablesst">Sorted String Table（SST）&lt;/h2>
&lt;p>SST 是数据的持久化格式，按照表主键的顺序存放，目前 HoraeDB 采用 parquet 格式来存储。&lt;/p>
&lt;p>对于 HoraeDB 来说，SST 有一个重要特性： &lt;code>segment_duration&lt;/code>，只有同一个 segment 内的 SST 才有可能进行合并操作。而且有了 segment，也方便淘汰过期的数据。&lt;/p></description></item><item><title>常用 SQL</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/utility/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/utility/</guid><description>&lt;p>HoraeDB 中有许多实用的 SQL 工具，可以辅助表操作或查询检查。&lt;/p>
&lt;h2 id="查看建表语句">查看建表语句&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">SHOW&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">table_name&lt;/span>;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>SHOW CREATE TABLE&lt;/code> 返回指定表的当前版本的创建语句，包括列定义、表引擎和参数选项等。例如：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">-- create one table
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(a&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">bigint&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>b&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">int&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">default&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">3&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">c&lt;/span>&lt;span style="color:#bbb"> &lt;/span>string&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">default&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#39;x&amp;#39;&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>d&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">smallint&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">null&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>t&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(t))&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>Analytic;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#408080;font-style:italic">-- Result: affected_rows: 0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#408080;font-style:italic">-- show how one table should be created.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>&lt;span style="color:#008000;font-weight:bold">SHOW&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#408080;font-style:italic">-- Result DDL:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>tsid&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>uint64&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>a&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">bigint&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>b&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">int&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#008000;font-weight:bold">c&lt;/span>&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>string,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>d&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">smallint&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">PRIMARY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(t,tsid),&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(t)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#666">=&lt;/span>Analytic&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>arena_block_size&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;2097152&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>compaction_strategy&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;default&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>compression&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;ZSTD&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>enable_ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;true&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>num_rows_per_row_group&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;8192&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>segment_duration&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;7d&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>update_mode&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;OVERWRITE&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>write_buffer_size&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;33554432&amp;#39;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="查看表信息">查看表信息&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">DESCRIBE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">table_name&lt;/span>;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>DESCRIBE&lt;/code> 语句返回一个表的详细结构信息，包括每个字段的名称和类型，字段是否为 &lt;code>Tag&lt;/code> 或主键，字段是否可空等。
此外，自动生成的字段 &lt;code>tsid&lt;/code> 也会展示在结果里。&lt;/p></description></item><item><title>配置项</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/engine_options/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/engine_options/</guid><description>&lt;p>建表时可以使用下列的选项配置引擎：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>enable_ttl&lt;/code>：布尔类型，默认为 &lt;code>true&lt;/code>，当一个表配置 TTL 时，早于 &lt;code>ttl&lt;/code> 的数据不会被查询到并且会被删除。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>ttl&lt;/code>：&lt;code>duration&lt;/code> 类型，默认值为&lt;code>7d&lt;/code>，此项定义数据的生命周期，只在 &lt;code>enable_ttl&lt;/code> 为 &lt;code>true&lt;/code> 的情况下使用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>storage_format&lt;/code>： &lt;code>string&lt;/code> 类型，数据存储的格式，有两种可选:&lt;/p>
&lt;ul>
&lt;li>&lt;code>columnar&lt;/code>, 默认值&lt;/li>
&lt;li>&lt;code>hybrid&lt;/code>, 注意：此功能仍在开发中，将来可能会发生变化。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>上述两种存储格式详见 &lt;a href="https://horaedb.apache.org/cn/docs/user-guide/sql/engine_options/#存储格式">存储格式&lt;/a> 部分。&lt;/p>
&lt;h2 id="存储格式">存储格式&lt;/h2>
&lt;p>HoraeDB 支持两种存储格式，一个是 &lt;code>columnar&lt;/code>, 这是传统的列式格式，一个物理列中存储表的一个列。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span>| Timestamp | Device ID | Status Code | Tag 1 | Tag 2 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| --------- |---------- | ----------- | ----- | ----- |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:01 | A | 0 | v1 | v1 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:01 | B | 0 | v2 | v2 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:02 | A | 0 | v1 | v1 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:02 | B | 1 | v2 | v2 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:03 | A | 0 | v1 | v1 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 12:03 | B | 0 | v2 | v2 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| ..... | | | | |
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>另一个是 &lt;code>hybrid&lt;/code>, 当前还在实验阶段的存储格式，用于在列式存储中模拟面向行的存储，以加速经典的时序查询。&lt;/p></description></item><item><title>Apache HoraeDB 与你相约北京理工大学</title><link>https://horaedb.apache.org/cn/blog/2024/ccf-bit/</link><pubDate>Thu, 24 Oct 2024 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/blog/2024/ccf-bit/</guid><description>&lt;p>在数字化转型的浪潮中，开源软件人才的培养是信息技术创新发展的重要根基，高校学子作为我国开源生态的源头活水备受重视。10 月 26 日 CCF 开源发展委员会“开源高校行”活动将走进北京理工大学与高校师生交流分享，共同推进开源教育，建立产学研用一体化开源创新人才培养体系。诚邀您的参与！&lt;/p>
&lt;p>Apache HoraeDB PPMC 成员 &lt;a href="https://github.com/chunshao90">任春韶&lt;/a> 将带来 Optimizing Apache HoraeDB for High-Cardinality Metrics at AntGroup 为题的分享，欢迎在场的朋友前来观看、交流 🤝&lt;/p>
&lt;h1 id="活动须知">活动须知&lt;/h1>
&lt;ul>
&lt;li>时间：2024 年 10 月 26 号 18:30-20:05&lt;/li>
&lt;li>地点：北京理工大学良乡校区文萃楼 I 405&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://horaedb.apache.org/images/ccf-bit.jpg">&lt;/p></description></item><item><title>Apache HoraeDB 与你相约 Community Over Code 北美大会</title><link>https://horaedb.apache.org/cn/blog/2024/coc-na/</link><pubDate>Mon, 07 Oct 2024 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/blog/2024/coc-na/</guid><description>&lt;p>在数字化浪潮席卷全球的今天，开源软件已成为推动科技创新的核心驱动力。ApacheCon 作为全球最具影响力的开源盛会之一，每年都吸引着来自世界各地的开发者、技术专家和企业代表。&lt;/p>
&lt;p>这次 &lt;a href="https://communityovercode.org/">Community Over Code&lt;/a> 北美大会将在丹佛君悦大酒店举行为期四天的现场会议，重点讨论搜索、大数据、物联网、社区、地理空间、金融技术和许多其他主题。&lt;/p>
&lt;p>Apache HoraeDB PPMC 成员 &lt;a href="https://github.com/jiacai2050">jiacai2050&lt;/a> 将带来 Optimizing Apache HoraeDB for High-Cardinality Metrics at AntGroup 为题的分享，欢迎在场的朋友前来观看、交流 🤝&lt;/p>
&lt;p>&lt;img src="https://horaedb.apache.org/images/coc-na-denver.jpg">&lt;/p>
&lt;p>更多议程内容，可以参考官网的 &lt;a href="https://communityovercode.org/schedule/">Sessions Schedule
&lt;/a>。&lt;/p></description></item><item><title>欢迎 Apache HoraeDB 新晋 Committer： 鲍金日</title><link>https://horaedb.apache.org/cn/blog/2024/new-committer-baojinri/</link><pubDate>Fri, 13 Sep 2024 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/blog/2024/new-committer-baojinri/</guid><description>&lt;p>各位开发者们，&lt;/p>
&lt;p>今天很高兴宣布，HoraeDB 社区新增了一个 committer：&lt;a href="https://github.com/baojinri">鲍金日&lt;/a>，他之前的贡献得到 HoraeDB PPMC 的&lt;a href="https://lists.apache.org/thread/kqp9jl325b5crz9kt9t3o2bkzplhm7oz">一致认可&lt;/a>，并于 2024-09-10 投票成为 committer，感谢他一直以来的贡献。下面是他的贡献记录：&lt;/p>
&lt;ul>
&lt;li>33 PRs to &lt;a href="https://github.com/apache/horaedb/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">main repo&lt;/a>&lt;/li>
&lt;li>4 PRs to &lt;a href="https://github.com/apache/horaedb-docs/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">docs repo&lt;/a>&lt;/li>
&lt;li>13 PRs to &lt;a href="https://github.com/apache/incubator-horaedb-meta/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">meta repo&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>需要明确一点，成为 committer 并不需要额外做什么，主要是方便开发者后续可以更便利（有仓库写权限）地参与社区贡献。&lt;/p>
&lt;p>最后，再次感谢鲍金日一直以来对社区的付出，衷心希望他能继续贡献，共同见证社区的成长。&lt;/p>
&lt;p>欢迎更多感兴趣的朋友加入我们的&lt;a href="https://horaedb.apache.org/community">社区&lt;/a>，与我们近距离交流。&lt;/p></description></item><item><title>预告：第一次线上会议</title><link>https://horaedb.apache.org/cn/blog/2024/first-online-meeting/</link><pubDate>Wed, 21 Aug 2024 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/blog/2024/first-online-meeting/</guid><description>&lt;p>各位开发者们，&lt;/p>
&lt;p>欢迎大家参加我们的第一次线上会议！这次会议标志着我们团队在项目开发过程中的一个重要里程碑，也是我们合作共赢的开始。&lt;/p>
&lt;h1 id="会议目的">会议目的&lt;/h1>
&lt;p>这次会议的主要目的是让大家相互认识，了解项目的总体目标，讨论开发的初步计划，并明确各自的角色和责任。我们希望通过此次会议，能够为接下来的工作奠定坚实的基础，并建立起一个高效、透明的沟通机制。&lt;/p>
&lt;h1 id="主要议题">主要议题&lt;/h1>
&lt;ol>
&lt;li>Apache HoraeDB 项目现状介绍&lt;/li>
&lt;li>新 Metric Engine 设计方案介绍&lt;/li>
&lt;/ol>
&lt;h1 id="参会方式">参会方式&lt;/h1>
&lt;p>入会链接：&lt;a href="https://meeting.dingtalk.com/j/011mRkbIdqL">https://meeting.dingtalk.com/j/011mRkbIdqL&lt;/a>&lt;/p>
&lt;p>可通过浏览器直接入会，无需下载钉钉。&lt;/p>
&lt;p>也欢迎感兴趣的朋友可以&lt;a href="https://horaedb.apache.org/community">加入我们的社区&lt;/a>（钉钉群、微信公众号等），获取社区最新动态。&lt;/p>
&lt;h1 id="会议时间">会议时间&lt;/h1>
&lt;p>2024 年 08 月 27 日 周二，21:00-22:00 (GMT+8)&lt;/p></description></item><item><title>ALTER TABLE</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/alter_table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/alter_table/</guid><description>&lt;p>使用 &lt;code>ALTER TABLE&lt;/code> 可以改变表的结构和参数 .&lt;/p>
&lt;h2 id="变更表结构">变更表结构&lt;/h2>
&lt;p>例如可以使用 &lt;code>ADD COLUMN&lt;/code> 增加表的列 :&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">-- create a table and add a column to it
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>(a&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000">int&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>t&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(t))&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>Analytic;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">ALTER&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>t&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">ADD&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">COLUMN&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(b&lt;span style="color:#bbb"> &lt;/span>string);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>变更后的表结构如下：&lt;/p>
&lt;pre tabindex="0">&lt;code>-- DESCRIBE TABLE `t`;

name type is_primary is_nullable is_tag

t timestamp true false false
tsid uint64 true false false
a int false true false
b string false true false
&lt;/code>&lt;/pre>&lt;h2 id="变更表参数">变更表参数&lt;/h2>
&lt;p>例如可以使用 &lt;code>MODIFY SETTING&lt;/code> 修改表的参数 :&lt;/p></description></item><item><title>DROP TABLE</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/drop_table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/drop_table/</guid><description>&lt;h2 id="基础语法">基础语法&lt;/h2>
&lt;p>删除表的基础语法如下:&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">DROP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">IF&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">EXISTS&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">table_name&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Drop Table&lt;/code> 用来删除一个表，请谨慎使用这个语句，因为会同时删除表的定义和表的数据，并且无法恢复。&lt;/p></description></item><item><title>Go</title><link>https://horaedb.apache.org/cn/docs/user-guide/sdk/go/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sdk/go/</guid><description>&lt;h2 id="安装">安装&lt;/h2>
&lt;pre tabindex="0">&lt;code>go get github.com/apache/incubator-horaedb-client-go
&lt;/code>&lt;/pre>&lt;p>你可以在这里找到最新的版本 &lt;a href="https://github.com/apache/incubator-horaedb-client-go/tags">here&lt;/a>.&lt;/p>
&lt;h2 id="如何使用">如何使用&lt;/h2>
&lt;h3 id="初始化客户端">初始化客户端&lt;/h3>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>	client, err &lt;span style="color:#666">:=&lt;/span> horaedb.&lt;span style="color:#00f">NewClient&lt;/span>(endpoint, horaedb.Direct,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>		horaedb.&lt;span style="color:#00f">WithDefaultDatabase&lt;/span>(&lt;span style="color:#ba2121">&amp;#34;public&amp;#34;&lt;/span>), &lt;span style="color:#408080;font-style:italic">// Client所使用的database
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">&lt;/span>	)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>参数名称&lt;/th>
 &lt;th>说明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>defaultDatabase&lt;/td>
 &lt;td>所使用的 database，可以被单个 &lt;code>Write&lt;/code> 或者 &lt;code>SQLRequest&lt;/code> 请求中的 database 覆盖&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>RPCMaxRecvMsgSize&lt;/td>
 &lt;td>grpc &lt;code>MaxCallRecvMsgSize&lt;/code> 配置, 默认是 1024 _ 1024 _ 1024&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>RouteMaxCacheSize&lt;/td>
 &lt;td>如果 router 客户端中的 路由缓存超过了这个值，将会淘汰最不活跃的直至降低这个阈值, 默认是 10000&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>注意： HoraeDB 当前仅支持预创建的 &lt;code>public&lt;/code> database , 未来会支持多个 database。&lt;/p>
&lt;h3 id="管理表">管理表&lt;/h3>
&lt;p>HoraeDB 使用 SQL 来管理表格，比如创建表、删除表或者新增列等等，这和你在使用 SQL 管理其他的数据库时没有太大的区别。&lt;/p></description></item><item><title>InfluxDB</title><link>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/influxdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/influxdb/</guid><description>&lt;p>&lt;a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB&lt;/a> 是一个时间序列数据库，旨在处理高写入和查询负载。它是 TICK 堆栈的一个组成部分。InfluxDB 旨在用作涉及大量时间戳数据的任何用例的后备存储，包括 DevOps 监控、应用程序指标、物联网传感器数据和实时分析。&lt;/p>
&lt;p>HoraeDB 支持 &lt;a href="https://docs.influxdata.com/influxdb/v1.8/tools/api/#influxdb-1x-http-endpoints">InfluxDB v1.8&lt;/a> 写入和查询 API。&lt;/p>
&lt;blockquote>
&lt;p>注意：用户需要将以下配置添加到服务器的配置中才能尝试 InfluxDB 写入/查询。&lt;/p>
&lt;/blockquote>
&lt;pre tabindex="0">&lt;code>[server.default_schema_config]
default_timestamp_column_name = &amp;#34;time&amp;#34;
&lt;/code>&lt;/pre>&lt;h1 id="写入">写入&lt;/h1>
&lt;pre tabindex="0">&lt;code>curl -i -XPOST &amp;#34;http://localhost:5440/influxdb/v1/write&amp;#34; --data-binary &amp;#39;
demo,tag1=t1,tag2=t2 field1=90,field2=100 1679994647000
demo,tag1=t1,tag2=t2 field1=91,field2=101 1679994648000
demo,tag1=t11,tag2=t22 field1=90,field2=100 1679994647000
demo,tag1=t11,tag2=t22 field1=91,field2=101 1679994648000
&amp;#39;
&lt;/code>&lt;/pre>&lt;p>Post 的内容采用的是 &lt;a href="https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_reference/">InfluxDB line protocol&lt;/a> 格式。&lt;/p>
&lt;p>&lt;code>measurement&lt;/code> 将映射到 HoraeDB 中的一个表，在首次写入时 server 会自动进行建表(注意：创建表的 TTL 是 7d，写入超过当前周期数据会被丢弃)。&lt;/p>
&lt;p>例如，在上面插入数据时，HoraeDB 中将创建下表：&lt;/p>
&lt;pre tabindex="0">&lt;code>CREATE TABLE `demo` (
 `tsid` uint64 NOT NULL,
 `time` timestamp NOT NULL,
 `field1` double,
 `field2` double,
 `tag1` string TAG,
 `tag2` string TAG,
 PRIMARY KEY (tsid, time),
 timestamp KEY (time))
&lt;/code>&lt;/pre>&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;ul>
&lt;li>InfluxDB 在写入时，时间戳精度默认是纳秒，HoraeDB 只支持毫秒级时间戳，用户可以通过 &lt;code>precision&lt;/code> 参数指定数据精度，HoraeDB 内部会自动转成毫秒精度。&lt;/li>
&lt;li>暂时不支持诸如 &lt;code>db&lt;/code> 等查询参数&lt;/li>
&lt;/ul>
&lt;h1 id="查询">查询&lt;/h1>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span> curl -G &lt;span style="color:#ba2121">&amp;#39;http://localhost:5440/influxdb/v1/query&amp;#39;&lt;/span> --data-urlencode &lt;span style="color:#ba2121">&amp;#39;q=SELECT * FROM &amp;#34;demo&amp;#34;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查询结果和 InfluxDB 查询接口一致：&lt;/p></description></item><item><title>INSERT</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/dml/insert/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/dml/insert/</guid><description>&lt;h2 id="基础语法">基础语法&lt;/h2>
&lt;p>写入数据的基础语法如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">INSERT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">INTO&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>tbl_name&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[(col_name&lt;span style="color:#bbb"> &lt;/span>[,&lt;span style="color:#bbb"> &lt;/span>col_name]&lt;span style="color:#bbb"> &lt;/span>...)]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">{&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">{&lt;/span>&lt;span style="color:#008000;font-weight:bold">VALUES&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>VALUE&lt;span style="">}&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(value_list)&lt;span style="color:#bbb"> &lt;/span>[,&lt;span style="color:#bbb"> &lt;/span>(value_list)]&lt;span style="color:#bbb"> &lt;/span>...&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">}&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>写入一行数据的示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">INSERT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">INTO&lt;/span>&lt;span style="color:#bbb"> &lt;/span>demo(&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#008000;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#666">`&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>tag1)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">VALUES&lt;/span>(&lt;span style="color:#666">1667374200022&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#39;horaedb&amp;#39;&lt;/span>)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Java</title><link>https://horaedb.apache.org/cn/docs/user-guide/sdk/java/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sdk/java/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>HoraeDBClient 是 HoraeDB 的高性能 Java 版客户端。&lt;/p>
&lt;h2 id="环境要求">环境要求&lt;/h2>
&lt;p>Java 8 及以上&lt;/p>
&lt;h2 id="依赖">依赖&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;lt;groupId&amp;gt;&lt;/span>io.ceresdb&lt;span style="color:#008000;font-weight:bold">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;lt;artifactId&amp;gt;&lt;/span>ceresdb-all&lt;span style="color:#008000;font-weight:bold">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;lt;version&amp;gt;&lt;/span>${CERESDB.VERSION}&lt;span style="color:#008000;font-weight:bold">&amp;lt;/version&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最新的版本可以从&lt;a href="https://github.com/apache/incubator-horaedb-client-java/blob/main/docs/CHANGELOG.md">这里&lt;/a>获取。&lt;/p>
&lt;h2 id="初始化客户端">初始化客户端&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#408080;font-style:italic">// CeresDB options&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">final&lt;/span>&lt;span style="color:#bbb"> &lt;/span>CeresDBOptions&lt;span style="color:#bbb"> &lt;/span>opts&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>CeresDBOptions.&lt;span style="color:#7d9029">newBuilder&lt;/span>(&lt;span style="color:#ba2121">&amp;#34;127.0.0.1&amp;#34;&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>8831,&lt;span style="color:#bbb"> &lt;/span>DIRECT)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#408080;font-style:italic">// 默认 gprc 端口号，DIRECT 模式&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>.&lt;span style="color:#7d9029">database&lt;/span>(&lt;span style="color:#ba2121">&amp;#34;public&amp;#34;&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#408080;font-style:italic">// Client所使用的database，可被RequestContext的database覆盖&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>.&lt;span style="color:#7d9029">writeMaxRetries&lt;/span>(1)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#408080;font-style:italic">// 写入失败重试次数上限（只有部分错误 code 才会重试，比如路由表失效）&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>.&lt;span style="color:#7d9029">readMaxRetries&lt;/span>(1)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#408080;font-style:italic">// 查询失败重试次数上限（只有部分错误 code 才会重试，比如路由表失效）&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>.&lt;span style="color:#7d9029">build&lt;/span>();&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">final&lt;/span>&lt;span style="color:#bbb"> &lt;/span>CeresDBClient&lt;span style="color:#bbb"> &lt;/span>client&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">new&lt;/span>&lt;span style="color:#bbb"> &lt;/span>CeresDBClient();&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">if&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#666">!&lt;/span>client.&lt;span style="color:#7d9029">init&lt;/span>(opts))&lt;span style="color:#bbb"> &lt;/span>{&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">throw&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">new&lt;/span>&lt;span style="color:#bbb"> &lt;/span>IllegalStateException(&lt;span style="color:#ba2121">&amp;#34;Fail to start CeresDBClient&amp;#34;&lt;/span>);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>}&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>客户端初始化至少需要三个参数：&lt;/p></description></item><item><title>NoMeta 模式</title><link>https://horaedb.apache.org/cn/docs/user-guide/cluster_deployment/no_meta/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/cluster_deployment/no_meta/</guid><description>&lt;p>&lt;strong>注意：此功能仅供测试使用，不推荐生产使用，相关功能将来可能会发生变化。&lt;/strong>&lt;/p>
&lt;p>本章介绍如何部署一个静态（无 HoraeMeta）的 HoraeDB 集群。&lt;/p>
&lt;p>在没有 HoraeMeta 的情况下，利用 HoraeDB 服务端针对表名提供了可配置的路由功能即可实现集群化部署，为此我们需要提供一个包含路由规则的正确配置。根据这个配置，请求会被发送到集群中的每个 HoraeDB 实例。&lt;/p>
&lt;h2 id="目标">目标&lt;/h2>
&lt;p>本文的目标是：在同一台机器上部署一个集群，这个集群包含两个 HoraeDB 实例。&lt;/p>
&lt;p>如果想要部署一个更大规模的集群，参考此方案也可以进行部署。&lt;/p>
&lt;h2 id="准备配置文件">准备配置文件&lt;/h2>
&lt;h3 id="基础配置">基础配置&lt;/h3>
&lt;p>HoraeDB 的基础配置如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>[server]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind_addr = &lt;span style="color:#ba2121">&amp;#34;0.0.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>http_port = &lt;span style="color:#666">5440&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>grpc_port = &lt;span style="color:#666">8831&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[logger]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>level = &lt;span style="color:#ba2121">&amp;#34;info&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[tracing]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dir = &lt;span style="color:#ba2121">&amp;#34;/tmp/horaedb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[analytic.storage.object_store]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>type = &lt;span style="color:#ba2121">&amp;#34;Local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data_dir = &lt;span style="color:#ba2121">&amp;#34;/tmp/horaedb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[analytic.wal]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>type = &lt;span style="color:#ba2121">&amp;#34;RocksDB&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data_dir = &lt;span style="color:#ba2121">&amp;#34;/tmp/horaedb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>为了在同一个机器上部署两个实例，我们需要为每个实例配置不同的服务端口和数据目录。&lt;/p></description></item><item><title>OpenTSDB</title><link>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/opentsdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/opentsdb/</guid><description>&lt;p>&lt;a href="http://opentsdb.net/">OpenTSDB&lt;/a> 是基于 HBase 的分布式、可伸缩的时间序列数据库。&lt;/p>
&lt;h1 id="写入">写入&lt;/h1>
&lt;p>HoraeDB 遵循 &lt;a href="http://opentsdb.net/docs/build/html/api_http/put.html">OpenTSDB put&lt;/a> 写入接口。&lt;/p>
&lt;p>&lt;code>summary&lt;/code> 和 &lt;code>detailed&lt;/code> 还未支持。&lt;/p>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://localhost:5440/opentsdb/api/put&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;[{
 &amp;#34;metric&amp;#34;: &amp;#34;sys.cpu.nice&amp;#34;,
 &amp;#34;timestamp&amp;#34;: 1692588459000,
 &amp;#34;value&amp;#34;: 18,
 &amp;#34;tags&amp;#34;: {
 &amp;#34;host&amp;#34;: &amp;#34;web01&amp;#34;,
 &amp;#34;dc&amp;#34;: &amp;#34;lga&amp;#34;
 }
},
{
 &amp;#34;metric&amp;#34;: &amp;#34;sys.cpu.nice&amp;#34;,
 &amp;#34;timestamp&amp;#34;: 1692588459000,
 &amp;#34;value&amp;#34;: 18,
 &amp;#34;tags&amp;#34;: {
 &amp;#34;host&amp;#34;: &amp;#34;web01&amp;#34;
 }
}]&amp;#39;
&lt;/code>&lt;/pre>&lt;p>&lt;code>metric&lt;/code> 将映射到 HoraeDB 中的一个表，在首次写入时 server 会自动进行建表(注意：创建表的 TTL 是 7d，写入超过当前周期数据会被丢弃)。&lt;/p>
&lt;p>例如，在上面插入数据时，HoraeDB 中将创建下表：&lt;/p>
&lt;pre tabindex="0">&lt;code>CREATE TABLE `sys.cpu.nice`(
 `tsid` uint64 NOT NULL,
 `timestamp` timestamp NOT NULL,
 `dc` string TAG,
 `host` string TAG,
 `value` bigint,
 PRIMARY KEY(tsid, timestamp),
 TIMESTAMP KEY(timestamp))
 ENGINE = Analytic
 WITH(arena_block_size = &amp;#39;2097152&amp;#39;, compaction_strategy = &amp;#39;default&amp;#39;,
 compression = &amp;#39;ZSTD&amp;#39;, enable_ttl = &amp;#39;true&amp;#39;, num_rows_per_row_group = &amp;#39;8192&amp;#39;,
 segment_duration = &amp;#39;2h&amp;#39;, storage_format = &amp;#39;AUTO&amp;#39;, ttl = &amp;#39;7d&amp;#39;,
 update_mode = &amp;#39;OVERWRITE&amp;#39;, write_buffer_size = &amp;#39;33554432&amp;#39;)
&lt;/code>&lt;/pre>&lt;h1 id="查询">查询&lt;/h1>
&lt;p>暂不支持 OpenTSDB 查询，&lt;a href="https://github.com/apache/incubator-horaedb/issues/904">tracking issue&lt;/a>。&lt;/p></description></item><item><title>Prometheus</title><link>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/prometheus/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/ecosystem/prometheus/</guid><description>&lt;p>&lt;a href="https://prometheus.io/">Prometheus&lt;/a>是一个流行的云原生监控工具，由于其可扩展性、可靠性和可伸缩性，被企业广泛采用。它用于从云原生服务（如 Kubernetes 和 OpenShift）中获取指标，并将其存储在时序数据库中。Prometheus 也很容易扩展，允许用户用其他数据库扩展其特性和功能。&lt;/p>
&lt;p>HoraeDB 可以作为 Prometheus 的长期存储解决方案，同时支持远程读取和远程写入 API。&lt;/p>
&lt;h2 id="配置">配置&lt;/h2>
&lt;p>你可以通过在&lt;code>prometheus.yml&lt;/code>中添加以下几行来配置 Prometheus 使用 HoraeDB 作为一个远程存储：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">remote_write&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">url&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#34;http://&amp;lt;address&amp;gt;:&amp;lt;http_port&amp;gt;/prom/v1/write&amp;#34;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">remote_read&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">url&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#34;http://&amp;lt;address&amp;gt;:&amp;lt;http_port&amp;gt;/prom/v1/read&amp;#34;&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>每一个指标都会对应一个 HoraeDB 中的表：&lt;/p>
&lt;ul>
&lt;li>标签（labels）对应字符串类型的 &lt;code>tag&lt;/code> 列&lt;/li>
&lt;li>数据的时间戳对应一个 timestamp 类型的 &lt;code>timestmap&lt;/code> 列&lt;/li>
&lt;li>数据的值对应一个双精度浮点数类型的 &lt;code>value&lt;/code> 列&lt;/li>
&lt;/ul>
&lt;p>比如有如下 Prometheus 指标：&lt;/p>
&lt;pre tabindex="0">&lt;code>up{env=&amp;#34;dev&amp;#34;, instance=&amp;#34;127.0.0.1:9090&amp;#34;, job=&amp;#34;prometheus-server&amp;#34;}
&lt;/code>&lt;/pre>&lt;p>对应 HoraeDB 中如下的表(注意：创建表的 TTL 是 7d，写入超过当前周期数据会被丢弃)：&lt;/p>
&lt;pre tabindex="0">&lt;code>CREATE TABLE `up` (
 `timestamp` timestamp NOT NULL,
 `tsid` uint64 NOT NULL,
 `env` string TAG,
 `instance` string TAG,
 `job` string TAG,
 `value` double,
 PRIMARY KEY (tsid, timestamp),
 timestamp KEY (timestamp)
);

SELECT * FROM up;
&lt;/code>&lt;/pre>&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: center">tsid&lt;/th>
 &lt;th style="text-align: center">timestamp&lt;/th>
 &lt;th style="text-align: center">env&lt;/th>
 &lt;th style="text-align: center">instance&lt;/th>
 &lt;th style="text-align: center">job&lt;/th>
 &lt;th style="text-align: center">value&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: center">12683162471309663278&lt;/td>
 &lt;td style="text-align: center">1675824740880&lt;/td>
 &lt;td style="text-align: center">dev&lt;/td>
 &lt;td style="text-align: center">127.0.0.1:9090&lt;/td>
 &lt;td style="text-align: center">prometheus-server&lt;/td>
 &lt;td style="text-align: center">1&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>Python</title><link>https://horaedb.apache.org/cn/docs/user-guide/sdk/python/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sdk/python/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>&lt;a href="https://pypi.org/project/ceresdb-client/">horaedb-client&lt;/a> 是 &lt;a href="https://github.com/apache/incubator-horaedb">HoraeDB&lt;/a> python 客户端.&lt;/p>
&lt;p>借助于 &lt;a href="https://github.com/PyO3">PyO3&lt;/a>，python 客户端的实现实际上是基于 &lt;a href="https://github.com/apache/incubator-horaedb-client-rs">rust 客户端&lt;/a> 的封装。&lt;/p>
&lt;p>本手册将会介绍 python client 的一些基本用法，其中涉及到的完整示例，可以查看&lt;a href="https://github.com/apache/incubator-horaedb-client-py/blob/main/examples/read_write.py">该示例代码&lt;/a>.&lt;/p>
&lt;h2 id="环境要求">环境要求&lt;/h2>
&lt;ul>
&lt;li>Python &amp;gt;= 3.7&lt;/li>
&lt;/ul>
&lt;h2 id="安装">安装&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>pip install ceresdb-client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你可以在这里找到最新的版本 &lt;a href="https://github.com/apache/incubator-horaedb-client-py/tags">here&lt;/a>.&lt;/p>
&lt;h2 id="初始化客户端">初始化客户端&lt;/h2>
&lt;p>首先介绍下如何初始化客户端，代码示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">import&lt;/span> &lt;span style="color:#00f;font-weight:bold">asyncio&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">import&lt;/span> &lt;span style="color:#00f;font-weight:bold">datetime&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">from&lt;/span> &lt;span style="color:#00f;font-weight:bold">ceresdb_client&lt;/span> &lt;span style="color:#008000;font-weight:bold">import&lt;/span> Builder, RpcContext, PointBuilder, ValueBuilder, WriteRequest, SqlQueryRequest, Mode, RpcConfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rpc_config &lt;span style="color:#666">=&lt;/span> RpcConfig()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rpc_config &lt;span style="color:#666">=&lt;/span> RpcConfig()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rpc_config&lt;span style="color:#666">.&lt;/span>thread_num &lt;span style="color:#666">=&lt;/span> &lt;span style="color:#666">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rpc_config&lt;span style="color:#666">.&lt;/span>default_write_timeout_ms &lt;span style="color:#666">=&lt;/span> &lt;span style="color:#666">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>builder &lt;span style="color:#666">=&lt;/span> Builder(&lt;span style="color:#ba2121">&amp;#39;127.0.0.1:8831&amp;#39;&lt;/span>, Mode&lt;span style="color:#666">.&lt;/span>Direct)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>builder&lt;span style="color:#666">.&lt;/span>set_rpc_config(rpc_config)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>builder&lt;span style="color:#666">.&lt;/span>set_default_database(&lt;span style="color:#ba2121">&amp;#39;public&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>client &lt;span style="color:#666">=&lt;/span> builder&lt;span style="color:#666">.&lt;/span>build()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>代码的最开始部分是依赖库的导入，在后面的示例中将省略这部分。&lt;/p></description></item><item><title>Rust</title><link>https://horaedb.apache.org/cn/docs/user-guide/sdk/rust/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sdk/rust/</guid><description>&lt;h2 id="安装">安装&lt;/h2>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cargo add ceresdb-client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你可以在这里找到最新的版本 &lt;a href="https://github.com/apache/incubator-horaedb-client-rs/tags">here&lt;/a>.&lt;/p>
&lt;h2 id="初始化客户端">初始化客户端&lt;/h2>
&lt;p>首先，我们需要初始化客户端。&lt;/p>
&lt;ul>
&lt;li>创建客户端的 builder，你必须设置 &lt;code>endpoint&lt;/code> 和 &lt;code>mode&lt;/code>：
&lt;ul>
&lt;li>&lt;code>endpoint&lt;/code> 是类似 &amp;ldquo;ip/domain_name:port&amp;rdquo; 形式的字符串。&lt;/li>
&lt;li>&lt;code>mode&lt;/code> 用于指定访问 HoraeDB 服务器的方式，&lt;a href="https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/db_client/builder.rs#L20">关于 mode 的详细信息&lt;/a>。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">let&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">mut&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>Builder::new(&lt;span style="color:#ba2121">&amp;#34;ip/domain_name:port&amp;#34;&lt;/span>,&lt;span style="color:#bbb"> &lt;/span>Mode::Direct&lt;span style="color:#666">/&lt;/span>Mode::Proxy);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>创建和设置 &lt;code>rpc_config&lt;/code>，可以按需进行定义或者直接使用默认值，更多详细参数请参考&lt;a href="https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/options.rs">这里&lt;/a>：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">let&lt;/span>&lt;span style="color:#bbb"> &lt;/span>rpc_config&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>RpcConfig&lt;span style="color:#bbb"> &lt;/span>{&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>thread_num: &lt;span style="color:#008000">Some&lt;/span>(&lt;span style="color:#666">1&lt;/span>),&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>default_write_timeout: &lt;span style="color:#00f;font-weight:bold">Duration&lt;/span>::from_millis(&lt;span style="color:#666">1000&lt;/span>),&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">..&lt;/span>&lt;span style="color:#008000">Default&lt;/span>::default()&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>};&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">let&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder.rpc_config(rpc_config);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>设置 &lt;code>default_database&lt;/code>，这会在执行 RPC 请求时未通过 RpcContext 设置 database 的情况下，将被作为目标 database 使用。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">let&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder.default_database(&lt;span style="color:#ba2121">&amp;#34;public&amp;#34;&lt;/span>);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>最后，我们从 builder 中创建客户端：&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">let&lt;/span>&lt;span style="color:#bbb"> &lt;/span>client&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>builder.build();&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="管理表">管理表&lt;/h2>
&lt;p>为了方便使用，在使用 gRPC 的 write 接口进行写入时，如果某个表不存在，HoraeDB 会根据第一次的写入自动创建一个表。&lt;/p></description></item><item><title>SELECT</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/dml/select/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/dml/select/</guid><description>&lt;h2 id="基础语法">基础语法&lt;/h2>
&lt;p>数据查询的基础语法如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">SELECT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>select_expr&lt;span style="color:#bbb"> &lt;/span>[,&lt;span style="color:#bbb"> &lt;/span>select_expr]&lt;span style="color:#bbb"> &lt;/span>...&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">FROM&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">table_name&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">WHERE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>where_condition]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">GROUP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">BY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">{&lt;/span>col_name&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>expr&lt;span style="">}&lt;/span>&lt;span style="color:#bbb"> &lt;/span>...&lt;span style="color:#bbb"> &lt;/span>]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">ORDER&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">BY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">{&lt;/span>col_name&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>expr&lt;span style="">}&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">ASC&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">DESC&lt;/span>]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">LIMIT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">offset&lt;/span>,]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">row_count&lt;/span>&lt;span style="color:#bbb"> &lt;/span>]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>数据查询的语法和 mysql 类似，示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">SELECT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">*&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">FROM&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>demo&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WHERE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>time_stamp&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">&amp;gt;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#39;2022-10-11 00:00:00&amp;#39;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">AND&lt;/span>&lt;span style="color:#bbb"> &lt;/span>time_stamp&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">&amp;lt;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#39;2022-10-12 00:00:00&amp;#39;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">LIMIT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">10&lt;/span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Shared Nothing 架构</title><link>https://horaedb.apache.org/cn/docs/design/shared_nothing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/shared_nothing/</guid><description>&lt;h2 id="背景">背景&lt;/h2>
&lt;p>在 &lt;a href="https://horaedb.apache.org/cn/docs/design/clustering/">集群&lt;/a> 文章中介绍了 HoraeDB 的集群方案，简单总结一下就是：&lt;/p>
&lt;ul>
&lt;li>计算存储分离；&lt;/li>
&lt;li>由中心化的元数据中心，管理整个集群；&lt;/li>
&lt;/ul>
&lt;p>然而计算存储分离的架构下，有个重要的问题在于，在集群调度的过程中，如何保证在共享的存储层中的数据不会因为不同的计算节点访问导致数据损坏，一个简单的例子就是如果同一块数据块被多个计算节点同时更新，可能就会出现数据损坏。&lt;/p>
&lt;p>而 HoraeDB 的解决方案是通过特定的机制，在共享存储的情况下达到了类似 &lt;a href="https://en.wikipedia.org/wiki/Shared-nothing_architecture">Shared-Nothing 架构&lt;/a> 的效果，也就是说存储层的数据经过一定规则的划分，&lt;strong>可以保证在任何时刻最多只有一个 HoraeDB 实例可以对其进行更新&lt;/strong>，本文中，将这个特性定义成&lt;strong>集群拓扑的正确性&lt;/strong>，如果这个正确性得到保证的话，那么数据就不会因为集群的灵活调度而受到损坏。&lt;/p>
&lt;p>本文对于 Shared Nothing 架构的优劣不做赘述，主要分享一下，HoraeDB 集群方案是如何在计算存储分离的方案下，达到 Shared Nothing 的效果（即如何保证 &lt;strong>集群拓扑的正确性&lt;/strong>）。&lt;/p>
&lt;h2 id="数据划分">数据划分&lt;/h2>
&lt;p>为了达到 Shared Nothing 的效果，首先需要将数据在共享的存储层上面进行好逻辑和物理的划分。在 &lt;a href="https://horaedb.apache.org/cn/docs/design/clustering/#shard">此前的集群介绍文章&lt;/a> 中介绍了 Shard 的基本作用，作为集群的基本调度单元，同时也是数据分布的基本划分单元，不同的 Shard 在存储层对应的数据是隔离的：&lt;/p>
&lt;ul>
&lt;li>在 WAL 中，写入的 Table 数据会按照 Shard 组织起来，按照 Shard 写入到 WAL 的不同区域中，不同的 Shard 在 WAL 中的数据是隔离开的；&lt;/li>
&lt;li>在 Object Storage 中，数据的管理是按照 Table 来划分的，而 Shard 和 Table 之间的关系是一对多的关系，也就说，任何一个 Table 只属于一个 Shard，因此在 Object Storage 中，Shard 之间的数据也是隔离的；&lt;/li>
&lt;/ul>
&lt;h2 id="shard-lock">Shard Lock&lt;/h2>
&lt;p>在数据划分好之后，需要保证的就是在任何时刻，同一时刻最多只有一个 HoraeDB 实例能够更新 Shard 的数据。那么要如何保证这一点的呢？很自然地，通过锁可以达到互斥的效果，不过在分布式集群中，我们需要的是分布式锁。通过分布式锁，每一个 Shard 被分配给 HoraeDB 实例时，HoraeDB 必须先获取到相应的 Shard Lock，才能完成 Shard 的打开操作，对应地，当 Shard 关闭后，HoraeDB 实例也需要主动释放 Shard Lock。&lt;/p></description></item><item><title>WithMeta 模式</title><link>https://horaedb.apache.org/cn/docs/user-guide/cluster_deployment/with_meta/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/cluster_deployment/with_meta/</guid><description>&lt;p>本文展示如何部署一个由 HoraeMeta 控制的 HoraeDB 集群，有了 HoraeMeta 提供的服务，如果 HoraeDB 使用存储不在本地的话，就可以实现很多分布式特性，比如水平扩容、负载均衡、服务高可用等。&lt;/p>
&lt;h2 id="部署-horaemeta">部署 HoraeMeta&lt;/h2>
&lt;p>HoraeMeta 是 HoraeDB 分布式模式的核心服务之一，用于管理 HoraeDB 节点的调度，为 HoraeDB 集群提供高可用、负载均衡、集群管控等能力。
HoraeMeta 本身通过嵌入式的 &lt;a href="https://github.com/etcd-io/etcd">ETCD&lt;/a> 保障高可用。此外，ETCD 的服务也被暴露给 HoraeDB 用于实现分布式锁使用。&lt;/p>
&lt;h3 id="编译打包">编译打包&lt;/h3>
&lt;ul>
&lt;li>安装 Golang，版本号 &amp;gt;= 1.19。&lt;/li>
&lt;li>在项目根目录下使用 &lt;code>make build&lt;/code> 进行编译打包。&lt;/li>
&lt;/ul>
&lt;h3 id="部署方式">部署方式&lt;/h3>
&lt;h4 id="启动配置">启动配置&lt;/h4>
&lt;p>目前 HoraeMeta 支持以配置文件和环境变量两种方式来指定服务启动配置。我们提供了配置文件方式启动的示例，具体可以参考 &lt;a href="https://github.com/apache/horaedb/tree/main/horaemeta/config">config&lt;/a>。
环境变量的配置优先级高于配置文件，当同时存在时，以环境变量为准。&lt;/p>
&lt;h4 id="动态拓扑和静态拓扑">动态拓扑和静态拓扑&lt;/h4>
&lt;p>即使使用了 HoraeMeta 来部署 HoraeDB 集群，也可以选择静态拓扑或动态拓扑。对于静态拓扑，表的分布在集群初始化后是静态的，而对于动态拓扑，表可以在不同的 HoraeDB 节点之间进行动态迁移以达到负载平衡或者 failover 的目的。但是动态拓扑只有在 HoraeDB 节点使用的存储是非本地的情况下才能启用，否则会因为表的数据是持久化在本地，当表转移到不同的 HoraeDB 节点时会导致数据损坏。&lt;/p>
&lt;p>目前，HoraeMeta 默认关闭集群拓扑的动态调度，并且在本篇指南中，这个选项也不会被开启，因为指南中的例子采用的是本地存储。如果要启用动态调度，可以将 &lt;code>TOPOLOGY_TYPE&lt;/code> 设置为 &lt;code>dynamic&lt;/code>（默认为 &lt;code>static&lt;/code>），之后负载均衡和 failover 将会起作用。但是需要注意的是，如果底层存储是本地磁盘，则不要启用它。&lt;/p>
&lt;p>此外对于静态拓扑，参数 &lt;code>DEFAULT_CLUSTER_NODE_COUNT&lt;/code> 表示已部署集群中 HoraeDB 节点的数量，应该被设置为 HoraeDB 服务器的实际机器数，这个参数非常重要，因为集群初始化完毕之后，HoraeDB 集群将无法再增减机器。&lt;/p></description></item><item><title>下载</title><link>https://horaedb.apache.org/cn/downloads/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/downloads/</guid><description>&lt;p>Apache HoraeDB 使用源码压缩包进行发布。&lt;/p>
&lt;h1 id="最新发布">最新发布&lt;/h1>
&lt;p>最新一次发布版本：2.0.0(2024-05-23)，源码&lt;a href="https://downloads.apache.org/incubator/horaedb/horaedb/v2.0.0/apache-horaedb-incubating-v2.0.0-src.tar.gz">下载地址&lt;/a>。&lt;/p>
&lt;p>用户可以按照以下指南使用 &lt;a href="https://downloads.apache.org/incubator/horaedb/horaedb/v2.0.0/apache-horaedb-incubating-v2.0.0-src.tar.gz.asc">signatures&lt;/a> 和 &lt;a href="https://downloads.apache.org/incubator/horaedb/horaedb/v2.0.0/apache-horaedb-incubating-v2.0.0-src.tar.gz.sha512">checksums&lt;/a> 验证此版本。&lt;/p>
&lt;h2 id="docker-镜像">Docker 镜像&lt;/h2>
&lt;p>暂不提供预构建好的二进制文件，用户可以使用源码&lt;a href="https://horaedb.apache.org/cn/docs/dev/compile_run/">编译&lt;/a>或者使用 docker 镜像：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://hub.docker.com/r/apache/horaemeta-server">https://hub.docker.com/r/apache/horaemeta-server&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://hub.docker.com/r/apache/horaedb-server">https://hub.docker.com/r/apache/horaedb-server&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="历史版本">历史版本&lt;/h2>
&lt;p>历史已发布版本，可以在&lt;a href="https://downloads.apache.org/incubator/horaedb/horaedb/">这里&lt;/a>查询得到。&lt;/p>
&lt;h1 id="验证-signatures-和-checksums">验证 signatures 和 checksums&lt;/h1>
&lt;p>强烈建议用户验证下载的文件。&lt;/p>
&lt;p>HoraeDB 为所有在下载站点上的文件提供 SHA digest 文件和 PGP 签名文件，验证文件以原始文件命名，并带有 &lt;code>sha512&lt;/code>、&lt;code>asc&lt;/code> 扩展名。&lt;/p>
&lt;h2 id="验证-checksums">验证 Checksums&lt;/h2>
&lt;p>用户需要下载 &lt;code>tar.gz&lt;/code> 文件和 &lt;code>tar.gz.sha512&lt;/code> 文件来验证 Checksums。验证命令：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sha512sum -c apache-horaedb-incubating-v2.0.0-src.tar.gz.sha512
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正确结果：&lt;/p>
&lt;pre tabindex="0">&lt;code>apache-horaedb-incubating-v2.0.0-src.tar.gz: OK
&lt;/code>&lt;/pre>&lt;h2 id="验证-signatures">验证 Signatures&lt;/h2>
&lt;p>验证 PGP Signatures，用户需要下载 &lt;a href="https://downloads.apache.org/incubator/horaedb/KEYS">release KEYS&lt;/a> 文件。&lt;/p>
&lt;p>导入下载的 KEYS 文件：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>gpg --import KEYS
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>验证命令：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>gpg --verify apache-horaedb-incubating-v2.0.0-src.tar.gz.asc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正确结果：&lt;/p></description></item><item><title>分区表</title><link>https://horaedb.apache.org/cn/docs/design/table_partitioning/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/table_partitioning/</guid><description>&lt;p>&lt;strong>注意：此功能仍在开发中，API 将来可能会发生变化。&lt;/strong>&lt;/p>
&lt;p>本章讨论 &lt;code>PartitionTable&lt;/code>。&lt;/p>
&lt;p>HoraeDB 使用的分区表语法类似于 &lt;a href="https://dev.mysql.com/doc/refman/8.0/en/partitioning-types.html">MySQL&lt;/a> 。&lt;/p>
&lt;p>一般的分区表包括&lt;code>Range Partitioning&lt;/code>、&lt;code>List Partitoning&lt;/code>、&lt;code>Hash Partitioning&lt;/code>和&lt;code>Key Partititioning&lt;/code>。&lt;/p>
&lt;p>HoraeDB 目前仅支持 Key Partitioning。&lt;/p>
&lt;h2 id="设计">设计&lt;/h2>
&lt;p>与 MySQL 类似，分区表的不同部分作为单独的表存储在不同的位置。&lt;/p>
&lt;p>目前设计，一个分区表可以在多个 HoraeDB 节点上打开，支持同时写入和查询，可以水平扩展。&lt;/p>
&lt;p>如下图所示，在 node0 和 node1 上打开了&lt;code>PartitionTable&lt;/code>，在 node2 和 node3 上打开了存放实际数据的物理子表。&lt;/p>
&lt;pre tabindex="0">&lt;code> ┌───────────────────────┐ ┌───────────────────────┐
 │Node0 │ │Node1 │
 │ ┌────────────────┐ │ │ ┌────────────────┐ │
 │ │ PartitionTable │ │ │ │ PartitionTable │ │
 │ └────────────────┘ │ │ └────────────────┘ │
 │ │ │ │ │ │
 └────────────┼──────────┘ └───────────┼───────────┘
 │ │
 │ │
 ┌───────────────────────┼─────────────────────────────┼───────────────────────┐
 │ │ │ │
┌────────────┼───────────────────────┼─────────────┐ ┌─────────────┼───────────────────────┼────────────┐
│Node2 │ │ │ │Node3 │ │ │
│ ▼ ▼ │ │ ▼ ▼ │
│ ┌─────────────────────┐ ┌─────────────────────┐ │ │ ┌─────────────────────┐ ┌─────────────────────┐ │
│ │ │ │ │ │ │ │ │ │ │ │
│ │ SubTable_0 │ │ SubTable_1 │ │ │ │ SubTable_2 │ │ SubTable_3 │ │
│ │ │ │ │ │ │ │ │ │ │ │
│ └─────────────────────┘ └─────────────────────┘ │ │ └─────────────────────┘ └─────────────────────┘ │
│ │ │ │
└──────────────────────────────────────────────────┘ └──────────────────────────────────────────────────┘
&lt;/code>&lt;/pre>&lt;h3 id="key-分区">Key 分区&lt;/h3>
&lt;p>&lt;code>Key Partitioning&lt;/code>支持一列或多列计算，使用 HoraeDB 内置的 hash 算法进行计算。&lt;/p></description></item><item><title>创建表</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/create_table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/ddl/create_table/</guid><description>&lt;h2 id="基础语法">基础语法&lt;/h2>
&lt;p>建表的基础语法如下 ( &lt;code>[]&lt;/code> 之间的内容是可选部分):&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">IF&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">EXISTS&lt;/span>]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">table_name&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb"> &lt;/span>column_definitions&lt;span style="color:#bbb"> &lt;/span>)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#bbb"> &lt;/span>engine_type&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb"> &lt;/span>table_options&lt;span style="color:#bbb"> &lt;/span>)];&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>列定义的语法 :&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">column_name&lt;/span>&lt;span style="color:#bbb"> &lt;/span>column_type&lt;span style="color:#bbb"> &lt;/span>[[&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="">{&lt;/span>[TAG]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">|&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">PRIMARY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>]&lt;span style="">}&lt;/span>&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">DICTIONARY&lt;/span>]&lt;span style="color:#bbb"> &lt;/span>[&lt;span style="color:#008000;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#ba2121">&amp;#39;&amp;#39;&lt;/span>]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>表选项的语法是键-值对，值用单引号（&lt;code>'&lt;/code>）来引用。例如：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>...&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb"> &lt;/span>enable_ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;false&amp;#39;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="if-not-exists">IF NOT EXISTS&lt;/h2>
&lt;p>添加 &lt;code>IF NOT EXISTS&lt;/code> 时，HoraeDB 在表名已经存在时会忽略建表错误。&lt;/p></description></item><item><title>基于 Kafka 的 WAL</title><link>https://horaedb.apache.org/cn/docs/design/wal_on_kafka/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/wal_on_kafka/</guid><description>&lt;h2 id="架构">架构&lt;/h2>
&lt;p>在本节中，将会介绍一种分布式 WAL 实现（基于 Kafka）。表的预写日志（write-ahead logs，以下简称日志）在本实现中是按 region 级别管理的，region 可以简单理解为多个表的共享日志文件。&lt;/p>
&lt;p>如下图所示，在本实现中将 region 映射到 Kafka 中的 topic（只有一个 partition）。 通常一个 region 需要两个 topic ，一个用于存储日志，另一个用于存储元数据。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span> ┌──────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ Kafka │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ ...... │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ ┌─────────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ Meta Topic │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Delete │ │ ┌─────────────────┐ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ┌──────────────────────┐ ┌───────┼─┼─► Partition │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ HoraeDB │ │ │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ │ └─────────────────┘ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ ┌──────────────────┐ │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ WAL │ │ │ │ └─────────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ...... │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ┌──────────────┐ │ │ │ │ ┌──────────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ Region │ │ │ │ │ │ Data Topic │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ ├─┼─┼──┘ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> | | | ┌──────────┐ │ │ │ │ │ ┌──────────────────┐ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ Metadata │ │ │ │ │ │ │ Partition │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ └──────────┘ │ │ │ Write │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Write ─────────┼─┼─► ├─┼─┼───┐ │ │ │ ┌──┬──┬──┬──┬──┐ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ ┌──────────┐ │ │ │ └──────┼─┼─┼─► │ │ │ │ ├─┼─┼─┼────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ Client │ │ │ │ │ │ │ └──┴──┴──┴──┴──┘ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Read ◄─────────┼─┼─┤ └──────────┘ │ │ │ │ │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ │ │ │ │ └──────────────────┘ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ └──▲───────────┘ │ │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ ...... │ │ │ └──────────────────────┘ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ └────┼─────────────┘ │ │ ...... │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ └──────────────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> └──────┼───────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ Read │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> └──────────────────────────────────────────────────────────┘
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据模型">数据模型&lt;/h2>
&lt;h3 id="日志格式">日志格式&lt;/h3>
&lt;p>日志格式采用了在 &lt;a href="https://horaedb.apache.org/cn/docs/design/wal_on_rocksdb/">基于 RocksDB 的 WAL&lt;/a> 中定义的通用格式。&lt;/p></description></item><item><title>基于 RocksDB 的 WAL</title><link>https://horaedb.apache.org/cn/docs/design/wal_on_rocksdb/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/wal_on_rocksdb/</guid><description>&lt;h2 id="架构">架构&lt;/h2>
&lt;p>在本节中，我们将介绍单机版 WAL 的实现（基于 RocksDB）。预写日志（write-ahead logs，以下简称日志）在本实现中是按表级别进行管理的，对应的数据结构为 &lt;code>TableUnit&lt;/code>。为简单起见，所有相关数据（日志或元数据）都存储在单个 column family（RocksDB 中的概念，可以类比关系型数据库的表） 中。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span> ┌─────────────────────────┐
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ HoraeDB │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ ┌─────────────────────┐ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ WAL │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ...... │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ┌────────────────┐ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write ─────┼─┼──► TableUnit │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Read ─────┼─┼──► ┌────────────┐ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ │ RocksDBRef │ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ │ └────────────┘ │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Delete ─────┼─┼──► │ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ └────────────────┘ │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │ ...... │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ └─────────────────────┘ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> │ │
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> └─────────────────────────┘
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="数据模型">数据模型&lt;/h2>
&lt;h3 id="通用日志格式">通用日志格式&lt;/h3>
&lt;p>通用日志格式分为 key 格式和 value 格式，下面是对 key 格式各个字段的介绍:&lt;/p></description></item><item><title>基于本地磁盘的 WAL</title><link>https://horaedb.apache.org/cn/docs/design/wal_on_disk/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/design/wal_on_disk/</guid><description>&lt;h2 id="架构">架构&lt;/h2>
&lt;p>本节将介绍基于本地磁盘的单机版 WAL（Write-Ahead Log，以下简称日志）的实现。在此实现中，日志按 region 级别进行管理。&lt;/p>
&lt;pre tabindex="0">&lt;code> ┌────────────────────────────┐
 │ HoraeDB │
 │ │
 │ ┌────────────────────────┐ │
 │ │ WAL │ │ ┌────────────────────────┐
 │ │ │ │ │ │
 │ │ ...... │ │ │ File System │
 │ │ │ │ │ │
 │ │ ┌────────────────────┐ │ │ manage │ ┌────────────────────┐ │
 Write ─────┼─┼─► Region ├─┼─┼─────────┼─► Region Dir │ │
 │ │ │ │ │ │ │ │ │ │
 Read ─────┼─┼─► ┌────────────┐ │ │ │ mmap │ │ ┌────────────────┐ │ │
 │ │ │ │ Segment 0 ├───┼─┼─┼─────────┼─┼─► Segment File 0 │ │ │
 │ │ │ └────────────┘ │ │ │ │ │ └────────────────┘ │ │
Delete ─────┼─┼─► ┌────────────┐ │ │ │ mmap │ │ ┌────────────────┐ │ │
 │ │ │ │ Segment 1 ├───┼─┼─┼─────────┼─┼─► SegmenteFile 1 │ │ │
 │ │ │ └────────────┘ │ │ │ │ │ └────────────────┘ │ │
 │ │ │ ┌────────────┐ │ │ │ mmap │ │ ┌────────────────┐ │ │
 │ │ │ │ Segment 2 ├───┼─┼─┼─────────┼─┼─► SegmenteFile 2 │ │ │
 │ │ │ └────────────┘ │ │ │ │ │ └────────────────┘ │ │
 │ │ │ ...... │ │ │ │ │ ...... │ │
 │ │ └────────────────────┘ │ │ │ └────────────────────┘ │
 │ │ ...... │ │ │ ...... │
 │ └────────────────────────┘ │ └────────────────────────┘
 └────────────────────────────┘
&lt;/code>&lt;/pre>&lt;h2 id="数据模型">数据模型&lt;/h2>
&lt;h3 id="文件路径">文件路径&lt;/h3>
&lt;p>每个 region 都拥有一个目录，用于管理该 region 的所有 segment。目录名为 region 的 ID。每个 segment 的命名方式为 &lt;code>seg_&amp;lt;id&amp;gt;&lt;/code>，ID 从 0 开始递增。&lt;/p></description></item><item><title>数据类型</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/model/data_types/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/model/data_types/</guid><description>&lt;p>HoraeDB 实现了 &lt;code>Table&lt;/code> 模型，支持的数据类型和 MySQL 比较类似。
下列表格列出了 HoraeDB 的数据类型和 MySQL 的数据类型的对应关系。&lt;/p>
&lt;h2 id="支持的数据类型-大小写不敏感">支持的数据类型 (大小写不敏感)&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>SQL&lt;/th>
 &lt;th>HoraeDB&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>null&lt;/td>
 &lt;td>Null&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>timestamp&lt;/td>
 &lt;td>Timestamp&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>double&lt;/td>
 &lt;td>Double&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>float&lt;/td>
 &lt;td>Float&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>string&lt;/td>
 &lt;td>String&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Varbinary&lt;/td>
 &lt;td>Varbinary&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>uint64&lt;/td>
 &lt;td>UInt64&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>uint32&lt;/td>
 &lt;td>UInt32&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>uint16&lt;/td>
 &lt;td>UInt16&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>uint8&lt;/td>
 &lt;td>UInt8&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>int64/bigint&lt;/td>
 &lt;td>Int64&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>int32/int&lt;/td>
 &lt;td>Int32&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>int16/smallint&lt;/td>
 &lt;td>Int16&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>int8/tinyint&lt;/td>
 &lt;td>Int8&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>boolean&lt;/td>
 &lt;td>Boolean&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>date&lt;/td>
 &lt;td>Date&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>time&lt;/td>
 &lt;td>Time&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>标量函数</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/scalar_functions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/scalar_functions/</guid><description>&lt;p>HoraeDB SQL 基于 &lt;a href="https://github.com/CeresDB/arrow-datafusion">DataFusion&lt;/a> 实现，支持的标量函数如下。更多详情请参考： &lt;a href="https://github.com/CeresDB/arrow-datafusion/blob/master/docs/source/user-guide/sql/scalar_functions.md">Datafusion&lt;/a>&lt;/p>
&lt;h2 id="数值函数">数值函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>abs(x)&lt;/td>
 &lt;td>绝对值&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>acos(x)&lt;/td>
 &lt;td>反余弦&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>asin(x)&lt;/td>
 &lt;td>反正弦&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>atan(x)&lt;/td>
 &lt;td>反正切&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>atan2(y, x)&lt;/td>
 &lt;td>y/x 的反正切&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>ceil(x)&lt;/td>
 &lt;td>小于或等于参数的最接近整数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>cos(x)&lt;/td>
 &lt;td>余弦&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>exp(x)&lt;/td>
 &lt;td>指数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>floor(x)&lt;/td>
 &lt;td>大于或等于参数的最接近整数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>ln(x)&lt;/td>
 &lt;td>自然对数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>log10(x)&lt;/td>
 &lt;td>以 10 为底的对数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>log2(x)&lt;/td>
 &lt;td>以 2 为底的对数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>power(base, exponent)&lt;/td>
 &lt;td>幂函数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>round(x)&lt;/td>
 &lt;td>四舍五入&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>signum(x)&lt;/td>
 &lt;td>根据参数的正负返回 -1、0、+1&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sin(x)&lt;/td>
 &lt;td>正弦&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sqrt(x)&lt;/td>
 &lt;td>平方根&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>tan(x)&lt;/td>
 &lt;td>正切&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>trunc(x)&lt;/td>
 &lt;td>截断计算，取整（向零取整）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="条件函数">条件函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>coalesce&lt;/td>
 &lt;td>如果它的参数中有一个不为 null，则返回第一个参数，如果所有参数均为 null，则返回 null。当从数据库中检索数据用于显示时，它经常用于用默认值替换 null 值。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>nullif&lt;/td>
 &lt;td>如果 value1 等于 value2，则返回 null 值；否则返回 value1。这可用于执行与 coalesce 表达式相反的操作&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="字符函数">字符函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>ascii&lt;/td>
 &lt;td>返回参数的第一个字符的 ascii 数字编码。在 UTF8 编码下，返回字符的 Unicode 码点。在其他多字节编码中，参数必须是 ASCII 字符。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>bit_length&lt;/td>
 &lt;td>返回字符串的比特位数。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>btrim&lt;/td>
 &lt;td>从字符串的开头和结尾删除给定字符串中的字符组成的最长字符串&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>char_length&lt;/td>
 &lt;td>等效于 length。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>character_length&lt;/td>
 &lt;td>等效于 length。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>concat&lt;/td>
 &lt;td>将两个或多个字符串合并为一个字符串。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>concat_ws&lt;/td>
 &lt;td>使用给定的分隔符组合两个值。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>chr&lt;/td>
 &lt;td>根据数字码返回字符。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>initcap&lt;/td>
 &lt;td>将字符串中每个单词的首字母大写。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>left&lt;/td>
 &lt;td>返回字符串的指定最左边字符。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>length&lt;/td>
 &lt;td>返回字符串中字符的数量。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>lower&lt;/td>
 &lt;td>将字符串中的所有字符转换为它们的小写。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>lpad&lt;/td>
 &lt;td>使用特定字符集将字符串左填充到给定长度。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>ltrim&lt;/td>
 &lt;td>从字符串的开头删除由字符中的字符组成的最长字符串（默认为空格）。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>md5&lt;/td>
 &lt;td>计算给定字符串的 MD5 散列值。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>octet_length&lt;/td>
 &lt;td>等效于 length。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>repeat&lt;/td>
 &lt;td>返回一个由输入字符串重复指定次数组成的字符串。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>replace&lt;/td>
 &lt;td>替换字符串中所有子字符串的出现为新子字符串。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>reverse&lt;/td>
 &lt;td>反转字符串。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>right&lt;/td>
 &lt;td>返回字符串的指定最右边字符。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>rpad&lt;/td>
 &lt;td>使用特定字符集将字符串右填充到给定长度。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>rtrim&lt;/td>
 &lt;td>从字符串的结尾删除包含 characters 中任何字符的最长字符串。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>digest&lt;/td>
 &lt;td>计算给定字符串的散列值。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>split_part&lt;/td>
 &lt;td>按指定分隔符拆分字符串，并从结果数组中返回&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>starts_with&lt;/td>
 &lt;td>检查字符串是否以给定字符串开始&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>strpos&lt;/td>
 &lt;td>搜索字符串是否包含一个给定的字符串，并返回位置&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>substr&lt;/td>
 &lt;td>提取子字符串&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>translate&lt;/td>
 &lt;td>把字符串翻译成另一种字符集 Translates one set of characters into another.&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>trim&lt;/td>
 &lt;td>移除字符串两侧的空白字符或其他指定字符。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>upper&lt;/td>
 &lt;td>将字符串中的所有字符转换为它们的大写。&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="正则函数">正则函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>regexp_match&lt;/td>
 &lt;td>判断一个字符串是否匹配正则表达式&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>regexp_replace&lt;/td>
 &lt;td>使用新字符串替换正则匹配的字符串中内容&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="时间函数">时间函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>to_timestamp&lt;/td>
 &lt;td>将字符串转换为 Timestamp(Nanoseconds，None)类型。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>to_timestamp_millis&lt;/td>
 &lt;td>将字符串转换为 Timestamp(Milliseconds，None)类型。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>to_timestamp_micros&lt;/td>
 &lt;td>将字符串转换为 Timestamp(Microseconds，None)类型。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>to_timestamp_seconds&lt;/td>
 &lt;td>将字符串转换为 Timestamp(Seconds，None)类型。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>extract&lt;/td>
 &lt;td>从日期/时间值中检索年份或小时等子字段。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>date_part&lt;/td>
 &lt;td>从日期/时间值中检索子字段。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>date_trunc&lt;/td>
 &lt;td>将日期/时间值截断到指定的精度。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>date_bin&lt;/td>
 &lt;td>将日期/时间值按指定精度进行分组。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>from_unixtime&lt;/td>
 &lt;td>将 Unix 时代转换为 Timestamp(Nanoseconds，None)类型。&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>now&lt;/td>
 &lt;td>作为 Timestamp(Nanoseconds，UTC)返回当前时间。&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="其他函数">其他函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>Function&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>array&lt;/td>
 &lt;td>创建有一个数组&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>arrow_typeof&lt;/td>
 &lt;td>返回内置的数据类型&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>in_list&lt;/td>
 &lt;td>检测数值是否在 list 里面&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>random&lt;/td>
 &lt;td>生成随机值&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sha224&lt;/td>
 &lt;td>sha224&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sha256&lt;/td>
 &lt;td>sha256&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sha384&lt;/td>
 &lt;td>sha384&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sha512&lt;/td>
 &lt;td>sha512&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>to_hex&lt;/td>
 &lt;td>转换为 16 进制&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>特殊字段</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/model/special_columns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/model/special_columns/</guid><description>&lt;p>HoraeDB 的表的约束如下：&lt;/p>
&lt;ul>
&lt;li>必须有主键&lt;/li>
&lt;li>主键必须包含时间列，并且只能包含一个时间列&lt;/li>
&lt;li>主键不可为空，并且主键的组成字段也不可为空&lt;/li>
&lt;/ul>
&lt;h2 id="timestamp-列">Timestamp 列&lt;/h2>
&lt;p>HoraeDB 的表必须包含一个时间戳列，对应时序数据中的时间，例如 OpenTSDB/Prometheus 的 &lt;code>timestamp&lt;/code>。
时间戳列通过关键字 &lt;code>timestamp key&lt;/code> 设置，例如 &lt;code>TIMESTAMP KEY(ts)&lt;/code>。&lt;/p>
&lt;h2 id="tag-列">Tag 列&lt;/h2>
&lt;p>&lt;code>Tag&lt;/code> 关键字定义了一个字段作为标签列，和时序数据中的 &lt;code>tag&lt;/code> 类似，例如 OpenTSDB 的 &lt;code>tag&lt;/code> 或 Prometheus 的 &lt;code>label&lt;/code>。&lt;/p>
&lt;h2 id="主键">主键&lt;/h2>
&lt;p>主键用于数据去重和排序，由一些列和一个时间列组成。
主键可以通过以下一些方式设置：&lt;/p>
&lt;ul>
&lt;li>使用 &lt;code>primary key&lt;/code> 关键字&lt;/li>
&lt;li>使用 &lt;code>tag&lt;/code> 来自动生成 TSID，HoraeDB 默认将使用 &lt;code>(TSID,timestamp)&lt;/code> 作为主键。&lt;/li>
&lt;li>只设置时间戳列，HoraeDB 将使用 &lt;code>(timestamp)&lt;/code> 作为主键。&lt;/li>
&lt;/ul>
&lt;p>注意：如果同时指定了主键和 &lt;code>Tag&lt;/code> 列，那么 &lt;code>Tag&lt;/code> 列只是一个额外的信息标识，不会影响主键生成逻辑。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>with_primary_key(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>ts&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c1&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c2&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c4&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c5&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(ts),&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">PRIMARY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(c1,&lt;span style="color:#bbb"> &lt;/span>ts)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#666">=&lt;/span>Analytic&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;7d&amp;#39;&lt;/span>);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>with_tag(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>ts&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c1&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>TAG&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c2&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>TAG&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c3&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>TAG&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c4&lt;span style="color:#bbb"> &lt;/span>DOUBLE&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c5&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c6&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(ts)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#666">=&lt;/span>Analytic&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;7d&amp;#39;&lt;/span>);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>with_timestamp(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>ts&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c1&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c2&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c3&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c4&lt;span style="color:#bbb"> &lt;/span>DOUBLE&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c5&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>c6&lt;span style="color:#bbb"> &lt;/span>STRING&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">NULL&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">KEY&lt;/span>(ts)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#666">=&lt;/span>Analytic&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">WITH&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(ttl&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#ba2121">&amp;#39;7d&amp;#39;&lt;/span>);&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="tsid">TSID&lt;/h2>
&lt;p>如果建表时没有设置主键，并且提供了 &lt;code>Tag&lt;/code> 列，HoraeDB 会自动生成一个 &lt;code>TSID&lt;/code> 列和时间戳列作为主键。&lt;code>TSID&lt;/code> 由所有 &lt;code>Tag&lt;/code> 列的 hash 值生成，本质上这是一种自动生成 ID 的机制。&lt;/p></description></item><item><title>监控</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/observability/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/observability/</guid><description>&lt;p>HoraeDB 支持使用 Prometheus 和 Grafana 做自监控。&lt;/p>
&lt;h2 id="prometheus">Prometheus&lt;/h2>
&lt;p>&lt;a href="https://github.com/prometheus/prometheus">Prometheus&lt;/a> 是非常流行的系统和服务监控系统。&lt;/p>
&lt;h3 id="配置">配置&lt;/h3>
&lt;p>把下面的配置保存到 &lt;code>prometheus.yml&lt;/code> 文件中。比如，在 &lt;code>tmp&lt;/code> 目录下，文件地址为 &lt;code>/tmp/prometheus.yml&lt;/code>。&lt;/p>
&lt;p>有两个 HoraeDB http 服务启动在 &lt;code>localhost:5440&lt;/code>、&lt;code>localhost:5441&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">global&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">scrape_interval&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>30s&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">scrape_configs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">job_name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>horaedb-server&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">static_configs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">targets&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>[your_ip:5440, your_ip:5441]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">labels&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">env&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>horaedbcluster&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Prometheus 详细配置见&lt;a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">这里&lt;/a>。&lt;/p></description></item><item><title>系统表</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/system_table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/system_table/</guid><description>&lt;h2 id="查询-table-信息">查询 Table 信息&lt;/h2>
&lt;p>类似于 Mysql&amp;rsquo;s &lt;code>information_schema.tables&lt;/code>, HoraeDB 提供 &lt;code>system.public.tables&lt;/code> 存储表信息。&lt;/p>
&lt;p>&lt;code>system.public.tables&lt;/code> 表的列如下 :&lt;/p>
&lt;ul>
&lt;li>timestamp([TimeStamp])&lt;/li>
&lt;li>catalog([String])&lt;/li>
&lt;li>schema([String])&lt;/li>
&lt;li>table_name([String])&lt;/li>
&lt;li>table_id([Uint64])&lt;/li>
&lt;li>engine([String])&lt;/li>
&lt;/ul>
&lt;p>通过表名查询表信息示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://localhost:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;select * from system.public.tables where `table_name`=\&amp;#34;my_table\&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回结果&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;rows&amp;#34;&lt;/span>:[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;timestamp&amp;#34;&lt;/span>:&lt;span style="color:#666">0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;catalog&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;horaedb&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;schema&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;public&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;table_name&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;my_table&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;table_id&amp;#34;&lt;/span>:&lt;span style="color:#666">3298534886446&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;engine&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;Analytic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>聚合函数</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/aggregate_functions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/aggregate_functions/</guid><description>&lt;p>HoraeDB SQL 基于 &lt;a href="https://github.com/apache/arrow-datafusion">DataFusion&lt;/a> 实现，支持的聚合函数如下。更多详情请参考： &lt;a href="https://github.com/apache/arrow-datafusion/blob/master/docs/source/user-guide/sql/aggregate_functions.md">Datafusion&lt;/a>&lt;/p>
&lt;h2 id="常用">常用&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>min&lt;/td>
 &lt;td>最小值&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>max&lt;/td>
 &lt;td>最大值&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>count&lt;/td>
 &lt;td>求行数&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>avg&lt;/td>
 &lt;td>平均值&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>sum&lt;/td>
 &lt;td>求和&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>array_agg&lt;/td>
 &lt;td>把数据放到一个数组&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="统计">统计&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>var / var_samp&lt;/td>
 &lt;td>返回给定列的样本方差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>var_pop&lt;/td>
 &lt;td>返回给定列的总体方差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>stddev / stddev_samp&lt;/td>
 &lt;td>返回给定列的样本标准差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>stddev_pop&lt;/td>
 &lt;td>返回给定列的总体标准差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>covar / covar_samp&lt;/td>
 &lt;td>返回给定列的样本协方差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>covar_pop&lt;/td>
 &lt;td>返回给定列的总体协方差&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>corr&lt;/td>
 &lt;td>返回给定列的相关系数&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="估值函数">估值函数&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>函数&lt;/th>
 &lt;th>描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>approx_distinct&lt;/td>
 &lt;td>返回输入值的近似去重数量（HyperLogLog）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>approx_median&lt;/td>
 &lt;td>返回输入值的近似中位数，它是 approx_percentile_cont(x, 0.5) 的简单写法&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>approx_percentile_cont&lt;/td>
 &lt;td>返回输入值的近似百分位数（TDigest），其中 p 是 0 和 1（包括）之间的 float64，等同于 approx_percentile_cont_with_weight(x, 1, p)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>approx_percentile_cont_with_weight&lt;/td>
 &lt;td>返回输入值带权重的近似百分位数（TDigest），其中 w 是权重列表达式，p 是 0 和 1（包括）之间的 float64&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>表操作</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/table/</guid><description>&lt;p>HoraeDB 支持标准的 SQL，用户可以使用 Http 协议创建表和读写表。更多内容可以参考 &lt;a href="../sql/README.md">SQL 语法&lt;/a>&lt;/p>
&lt;h2 id="创建表">创建表&lt;/h2>
&lt;p>示例如下&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://127.0.0.1:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;CREATE TABLE `demo` (`name` string TAG, `value` double NOT NULL, `t` timestamp NOT NULL, TIMESTAMP KEY(t)) ENGINE=Analytic with (enable_ttl=&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;false&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="写数据">写数据&lt;/h2>
&lt;p>示例如下&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://127.0.0.1:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;INSERT INTO demo(t, name, value) VALUES(1651737067000, &amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;horaedb&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;, 100)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="读数据">读数据&lt;/h2>
&lt;p>示例如下&lt;/p></description></item><item><title>集群运维</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/horaemeta/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/horaemeta/</guid><description>&lt;p>集群运维接口的使用前提是，HoraeDB 部署为使用 HoraeMeta 的集群模式。&lt;/p>
&lt;h2 id="运维接口">运维接口&lt;/h2>
&lt;p>注意： 如下接口在实际使用时需要将 127.0.0.1 替换为 HoraeMeta 的真实地址。&lt;/p>
&lt;ul>
&lt;li>查询表元信息
当 tableNames 不为空的时候，使用 tableNames 进行查询。
当 tableNames 为空的时候，使用 ids 进行查询。使用 ids 查询的时候，schemaName 不生效。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/table/query&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;:&amp;#34;public&amp;#34;,
 &amp;#34;names&amp;#34;:[&amp;#34;demo1&amp;#34;, &amp;#34;__demo1_0&amp;#34;],
}&amp;#39;

curl --location &amp;#39;http://127.0.0.1:8080/api/v1/table/query&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;ids&amp;#34;:[0, 1]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询表的路由信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/route&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;:&amp;#34;public&amp;#34;,
 &amp;#34;table&amp;#34;:[&amp;#34;demo&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询节点对应的 Shard 信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/getNodeShards&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;ClusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询 Shard 对应的表信息
如果 shardIDs 为空时，查询所有 shard 上表信息。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/getShardTables&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;shardIDs&amp;#34;: [1,2]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>删除指定表的元数据&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/dropTable&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;: &amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;: &amp;#34;public&amp;#34;,
 &amp;#34;table&amp;#34;: &amp;#34;demo&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Shard 切主&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/transferLeader&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;shardID&amp;#34;: 1,
 &amp;#34;oldLeaderNodeName&amp;#34;: &amp;#34;127.0.0.1:8831&amp;#34;,
 &amp;#34;newLeaderNodeName&amp;#34;: &amp;#34;127.0.0.1:18831&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Shard 分裂&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/split&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34; : &amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34; :&amp;#34;public&amp;#34;,
 &amp;#34;nodeName&amp;#34; :&amp;#34;127.0.0.1:8831&amp;#34;,
 &amp;#34;shardID&amp;#34; : 0,
 &amp;#34;splitTables&amp;#34;:[&amp;#34;demo&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>创建 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;name&amp;#34;:&amp;#34;testCluster&amp;#34;,
 &amp;#34;nodeCount&amp;#34;:3,
 &amp;#34;ShardTotal&amp;#34;:9,
 &amp;#34;enableSchedule&amp;#34;:true,
 &amp;#34;topologyType&amp;#34;:&amp;#34;static&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>更新 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{NewClusterName}&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;nodeCount&amp;#34;:28,
 &amp;#34;shardTotal&amp;#34;:128,
 &amp;#34;enableSchedule&amp;#34;:true,
 &amp;#34;topologyType&amp;#34;:&amp;#34;dynamic&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>列出 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>修改 &lt;code>enableSchedule&lt;/code>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{ClusterName}/enableSchedule&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;enable&amp;#34;:true
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询 &lt;code>enableSchedule&lt;/code>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{ClusterName}/enableSchedule&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>更新限流器&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/flowLimiter&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;limit&amp;#34;:1000,
 &amp;#34;burst&amp;#34;:10000,
 &amp;#34;enable&amp;#34;:true
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询限流器信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/flowLimiter&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 列出节点&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 节点切主&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/moveLeader&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;memberName&amp;#34;:&amp;#34;meta1&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 节点扩容&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;memberAddrs&amp;#34;:[&amp;#34;http://127.0.0.1:42380&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 替换节点&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;oldMemberName&amp;#34;:&amp;#34;meta0&amp;#34;,
 &amp;#34;newMemberAddr&amp;#34;:[&amp;#34;http://127.0.0.1:42380&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre></description></item><item><title>黑名单</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/block_list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/block_list/</guid><description>&lt;h2 id="增加黑名单">增加黑名单&lt;/h2>
&lt;p>如果你想限制某个表的查询，可以把表名加到 &lt;code>read_block_list&lt;/code> 中。&lt;/p>
&lt;p>示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://localhost:5000/admin/block&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;operation&amp;#34;:&amp;#34;Add&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;write_block_list&amp;#34;:[],
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;read_block_list&amp;#34;:[&amp;#34;my_table&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回结果：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;write_block_list&amp;#34;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;read_block_list&amp;#34;&lt;/span>: [&lt;span style="color:#ba2121">&amp;#34;my_table&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="设置黑名单">设置黑名单&lt;/h2>
&lt;p>设置黑名单的操作首先会清理已有的列表，然后再把新的表设置进去。&lt;/p></description></item></channel></rss>