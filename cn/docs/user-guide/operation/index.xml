<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>运维文档 on Apache HoraeDB</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/</link><description>Recent content in 运维文档 on Apache HoraeDB</description><generator>Hugo</generator><language>cn</language><atom:link href="https://horaedb.apache.org/cn/docs/user-guide/operation/index.xml" rel="self" type="application/rss+xml"/><item><title>监控</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/observability/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/observability/</guid><description>&lt;p>HoraeDB 支持使用 Prometheus 和 Grafana 做自监控。&lt;/p>
&lt;h2 id="prometheus">Prometheus&lt;/h2>
&lt;p>&lt;a href="https://github.com/prometheus/prometheus">Prometheus&lt;/a> 是非常流行的系统和服务监控系统。&lt;/p>
&lt;h3 id="配置">配置&lt;/h3>
&lt;p>把下面的配置保存到 &lt;code>prometheus.yml&lt;/code> 文件中。比如，在 &lt;code>tmp&lt;/code> 目录下，文件地址为 &lt;code>/tmp/prometheus.yml&lt;/code>。&lt;/p>
&lt;p>有两个 HoraeDB http 服务启动在 &lt;code>localhost:5440&lt;/code>、&lt;code>localhost:5441&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#008000;font-weight:bold">global&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">scrape_interval&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>30s&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>&lt;span style="color:#008000;font-weight:bold">scrape_configs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">job_name&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>horaedb-server&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">static_configs&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>- &lt;span style="color:#008000;font-weight:bold">targets&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>[your_ip:5440, your_ip:5441]&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">labels&lt;/span>:&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#008000;font-weight:bold">env&lt;/span>:&lt;span style="color:#bbb"> &lt;/span>horaedbcluster&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Prometheus 详细配置见&lt;a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">这里&lt;/a>。&lt;/p></description></item><item><title>系统表</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/system_table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/system_table/</guid><description>&lt;h2 id="查询-table-信息">查询 Table 信息&lt;/h2>
&lt;p>类似于 Mysql&amp;rsquo;s &lt;code>information_schema.tables&lt;/code>, HoraeDB 提供 &lt;code>system.public.tables&lt;/code> 存储表信息。&lt;/p>
&lt;p>&lt;code>system.public.tables&lt;/code> 表的列如下 :&lt;/p>
&lt;ul>
&lt;li>timestamp([TimeStamp])&lt;/li>
&lt;li>catalog([String])&lt;/li>
&lt;li>schema([String])&lt;/li>
&lt;li>table_name([String])&lt;/li>
&lt;li>table_id([Uint64])&lt;/li>
&lt;li>engine([String])&lt;/li>
&lt;/ul>
&lt;p>通过表名查询表信息示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://localhost:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;select * from system.public.tables where `table_name`=\&amp;#34;my_table\&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回结果&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;rows&amp;#34;&lt;/span>:[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;timestamp&amp;#34;&lt;/span>:&lt;span style="color:#666">0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;catalog&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;horaedb&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;schema&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;public&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;table_name&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;my_table&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;table_id&amp;#34;&lt;/span>:&lt;span style="color:#666">3298534886446&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;engine&amp;#34;&lt;/span>:&lt;span style="color:#ba2121">&amp;#34;Analytic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>表操作</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/table/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/table/</guid><description>&lt;p>HoraeDB 支持标准的 SQL，用户可以使用 Http 协议创建表和读写表。更多内容可以参考 &lt;a href="../sql/README.md">SQL 语法&lt;/a>&lt;/p>
&lt;h2 id="创建表">创建表&lt;/h2>
&lt;p>示例如下&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://127.0.0.1:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;CREATE TABLE `demo` (`name` string TAG, `value` double NOT NULL, `t` timestamp NOT NULL, TIMESTAMP KEY(t)) ENGINE=Analytic with (enable_ttl=&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;false&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="写数据">写数据&lt;/h2>
&lt;p>示例如下&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://127.0.0.1:5000/sql&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;query&amp;#34;: &amp;#34;INSERT INTO demo(t, name, value) VALUES(1651737067000, &amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;horaedb&amp;#39;&lt;/span>&lt;span style="color:#b62;font-weight:bold">\&amp;#39;&lt;/span>&lt;span style="color:#ba2121">&amp;#39;, 100)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="读数据">读数据&lt;/h2>
&lt;p>示例如下&lt;/p></description></item><item><title>集群运维</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/horaemeta/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/horaemeta/</guid><description>&lt;p>集群运维接口的使用前提是，HoraeDB 部署为使用 HoraeMeta 的集群模式。&lt;/p>
&lt;h2 id="运维接口">运维接口&lt;/h2>
&lt;p>注意： 如下接口在实际使用时需要将 127.0.0.1 替换为 HoraeMeta 的真实地址。&lt;/p>
&lt;ul>
&lt;li>查询表元信息
当 tableNames 不为空的时候，使用 tableNames 进行查询。
当 tableNames 为空的时候，使用 ids 进行查询。使用 ids 查询的时候，schemaName 不生效。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/table/query&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;:&amp;#34;public&amp;#34;,
 &amp;#34;names&amp;#34;:[&amp;#34;demo1&amp;#34;, &amp;#34;__demo1_0&amp;#34;],
}&amp;#39;

curl --location &amp;#39;http://127.0.0.1:8080/api/v1/table/query&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;ids&amp;#34;:[0, 1]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询表的路由信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/route&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;:&amp;#34;public&amp;#34;,
 &amp;#34;table&amp;#34;:[&amp;#34;demo&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询节点对应的 Shard 信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/getNodeShards&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;ClusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询 Shard 对应的表信息
如果 shardIDs 为空时，查询所有 shard 上表信息。&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/getShardTables&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;shardIDs&amp;#34;: [1,2]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>删除指定表的元数据&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/dropTable&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;: &amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34;: &amp;#34;public&amp;#34;,
 &amp;#34;table&amp;#34;: &amp;#34;demo&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Shard 切主&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/transferLeader&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34;:&amp;#34;defaultCluster&amp;#34;,
 &amp;#34;shardID&amp;#34;: 1,
 &amp;#34;oldLeaderNodeName&amp;#34;: &amp;#34;127.0.0.1:8831&amp;#34;,
 &amp;#34;newLeaderNodeName&amp;#34;: &amp;#34;127.0.0.1:18831&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>Shard 分裂&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request POST &amp;#39;http://127.0.0.1:8080/api/v1/split&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
-d &amp;#39;{
 &amp;#34;clusterName&amp;#34; : &amp;#34;defaultCluster&amp;#34;,
 &amp;#34;schemaName&amp;#34; :&amp;#34;public&amp;#34;,
 &amp;#34;nodeName&amp;#34; :&amp;#34;127.0.0.1:8831&amp;#34;,
 &amp;#34;shardID&amp;#34; : 0,
 &amp;#34;splitTables&amp;#34;:[&amp;#34;demo&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>创建 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;name&amp;#34;:&amp;#34;testCluster&amp;#34;,
 &amp;#34;nodeCount&amp;#34;:3,
 &amp;#34;ShardTotal&amp;#34;:9,
 &amp;#34;enableSchedule&amp;#34;:true,
 &amp;#34;topologyType&amp;#34;:&amp;#34;static&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>更新 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{NewClusterName}&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;nodeCount&amp;#34;:28,
 &amp;#34;shardTotal&amp;#34;:128,
 &amp;#34;enableSchedule&amp;#34;:true,
 &amp;#34;topologyType&amp;#34;:&amp;#34;dynamic&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>列出 HoraeDB 集群&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>修改 &lt;code>enableSchedule&lt;/code>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{ClusterName}/enableSchedule&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;enable&amp;#34;:true
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询 &lt;code>enableSchedule&lt;/code>&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/clusters/{ClusterName}/enableSchedule&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>更新限流器&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/flowLimiter&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;limit&amp;#34;:1000,
 &amp;#34;burst&amp;#34;:10000,
 &amp;#34;enable&amp;#34;:true
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>查询限流器信息&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/flowLimiter&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 列出节点&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 节点切主&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/moveLeader&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;memberName&amp;#34;:&amp;#34;meta1&amp;#34;
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 节点扩容&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location --request PUT &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;memberAddrs&amp;#34;:[&amp;#34;http://127.0.0.1:42380&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>HoraeMeta 替换节点&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>curl --location &amp;#39;http://127.0.0.1:8080/api/v1/etcd/member&amp;#39; \
--header &amp;#39;Content-Type: application/json&amp;#39; \
--data &amp;#39;{
 &amp;#34;oldMemberName&amp;#34;:&amp;#34;meta0&amp;#34;,
 &amp;#34;newMemberAddr&amp;#34;:[&amp;#34;http://127.0.0.1:42380&amp;#34;]
}&amp;#39;
&lt;/code>&lt;/pre></description></item><item><title>黑名单</title><link>https://horaedb.apache.org/cn/docs/user-guide/operation/block_list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/operation/block_list/</guid><description>&lt;h2 id="增加黑名单">增加黑名单&lt;/h2>
&lt;p>如果你想限制某个表的查询，可以把表名加到 &lt;code>read_block_list&lt;/code> 中。&lt;/p>
&lt;p>示例如下：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl --location --request POST &lt;span style="color:#ba2121">&amp;#39;http://localhost:5000/admin/block&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>--header &lt;span style="color:#ba2121">&amp;#39;Content-Type: application/json&amp;#39;&lt;/span> &lt;span style="color:#b62;font-weight:bold">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#b62;font-weight:bold">&lt;/span>-d &lt;span style="color:#ba2121">&amp;#39;{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;operation&amp;#34;:&amp;#34;Add&amp;#34;,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;write_block_list&amp;#34;:[],
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121"> &amp;#34;read_block_list&amp;#34;:[&amp;#34;my_table&amp;#34;]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ba2121">}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>返回结果：&lt;/p>
&lt;div class="highlight">&lt;div style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;write_block_list&amp;#34;&lt;/span>: [],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#008000;font-weight:bold">&amp;#34;read_block_list&amp;#34;&lt;/span>: [&lt;span style="color:#ba2121">&amp;#34;my_table&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="设置黑名单">设置黑名单&lt;/h2>
&lt;p>设置黑名单的操作首先会清理已有的列表，然后再把新的表设置进去。&lt;/p></description></item></channel></rss>