<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>SQL 语法 on Apache HoraeDB</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/</link><description>Recent content in SQL 语法 on Apache HoraeDB</description><generator>Hugo</generator><language>cn</language><atom:link href="https://horaedb.apache.org/cn/docs/user-guide/sql/index.xml" rel="self" type="application/rss+xml"/><item><title>标识符</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/identifier/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/identifier/</guid><description>HoraeDB 中表名、列名等标识符不能是保留关键字或以数字和标点符号开始，不过 HoraeDB 允许用反引号引用标识符（`）。在这种情况下，它可以是任何字符串，如 00_table 或 select。</description></item><item><title>常用 SQL</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/utility/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/utility/</guid><description>HoraeDB 中有许多实用的 SQL 工具，可以辅助表操作或查询检查。
查看建表语句 1 SHOW CREATE TABLE table_name; SHOW CREATE TABLE 返回指定表的当前版本的创建语句，包括列定义、表引擎和参数选项等。例如：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 -- create one table CREATE TABLE `t` (a bigint, b int default 3, c string default &amp;#39;x&amp;#39;, d smallint null, t timestamp NOT NULL, TIMESTAMP KEY(t)) ENGINE = Analytic; -- Result: affected_rows: 0 -- show how one table should be created.</description></item><item><title>配置项</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/engine_options/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/engine_options/</guid><description>建表时可以使用下列的选项配置引擎：
enable_ttl：布尔类型，默认为 true，当一个表配置 TTL 时，早于 ttl 的数据不会被查询到并且会被删除。
ttl：duration 类型，默认值为7d，此项定义数据的生命周期，只在 enable_ttl 为 true 的情况下使用。
storage_format： string 类型，数据存储的格式，有两种可选:
columnar, 默认值 hybrid, 注意：此功能仍在开发中，将来可能会发生变化。 上述两种存储格式详见 存储格式 部分。
存储格式 HoraeDB 支持两种存储格式，一个是 columnar, 这是传统的列式格式，一个物理列中存储表的一个列。
1 2 3 4 5 6 7 8 9 | Timestamp | Device ID | Status Code | Tag 1 | Tag 2 | | --------- |---------- | ----------- | ----- | ----- | | 12:01 | A | 0 | v1 | v1 | | 12:01 | B | 0 | v2 | v2 | | 12:02 | A | 0 | v1 | v1 | | 12:02 | B | 1 | v2 | v2 | | 12:03 | A | 0 | v1 | v1 | | 12:03 | B | 0 | v2 | v2 | | .</description></item><item><title>标量函数</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/scalar_functions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/scalar_functions/</guid><description>HoraeDB SQL 基于 DataFusion 实现，支持的标量函数如下。更多详情请参考： Datafusion
数值函数 函数 描述 abs(x) 绝对值 acos(x) 反余弦 asin(x) 反正弦 atan(x) 反正切 atan2(y, x) y/x 的反正切 ceil(x) 小于或等于参数的最接近整数 cos(x) 余弦 exp(x) 指数 floor(x) 大于或等于参数的最接近整数 ln(x) 自然对数 log10(x) 以 10 为底的对数 log2(x) 以 2 为底的对数 power(base, exponent) 幂函数 round(x) 四舍五入 signum(x) 根据参数的正负返回 -1、0、+1 sin(x) 正弦 sqrt(x) 平方根 tan(x) 正切 trunc(x) 截断计算，取整（向零取整） 条件函数 函数 描述 coalesce 如果它的参数中有一个不为 null，则返回第一个参数，如果所有参数均为 null，则返回 null。当从数据库中检索数据用于显示时，它经常用于用默认值替换 null 值。 nullif 如果 value1 等于 value2，则返回 null 值；否则返回 value1。这可用于执行与 coalesce 表达式相反的操作 字符函数 函数 描述 ascii 返回参数的第一个字符的 ascii 数字编码。在 UTF8 编码下，返回字符的 Unicode 码点。在其他多字节编码中，参数必须是 ASCII 字符。 bit_length 返回字符串的比特位数。 btrim 从字符串的开头和结尾删除给定字符串中的字符组成的最长字符串 char_length 等效于 length。 character_length 等效于 length。 concat 将两个或多个字符串合并为一个字符串。 concat_ws 使用给定的分隔符组合两个值。 chr 根据数字码返回字符。 initcap 将字符串中每个单词的首字母大写。 left 返回字符串的指定最左边字符。 length 返回字符串中字符的数量。 lower 将字符串中的所有字符转换为它们的小写。 lpad 使用特定字符集将字符串左填充到给定长度。 ltrim 从字符串的开头删除由字符中的字符组成的最长字符串（默认为空格）。 md5 计算给定字符串的 MD5 散列值。 octet_length 等效于 length。 repeat 返回一个由输入字符串重复指定次数组成的字符串。 replace 替换字符串中所有子字符串的出现为新子字符串。 reverse 反转字符串。 right 返回字符串的指定最右边字符。 rpad 使用特定字符集将字符串右填充到给定长度。 rtrim 从字符串的结尾删除包含 characters 中任何字符的最长字符串。 digest 计算给定字符串的散列值。 split_part 按指定分隔符拆分字符串，并从结果数组中返回 starts_with 检查字符串是否以给定字符串开始 strpos 搜索字符串是否包含一个给定的字符串，并返回位置 substr 提取子字符串 translate 把字符串翻译成另一种字符集 Translates one set of characters into another.</description></item><item><title>聚合函数</title><link>https://horaedb.apache.org/cn/docs/user-guide/sql/aggregate_functions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://horaedb.apache.org/cn/docs/user-guide/sql/aggregate_functions/</guid><description>HoraeDB SQL 基于 DataFusion 实现，支持的聚合函数如下。更多详情请参考： Datafusion
常用 函数 描述 min 最小值 max 最大值 count 求行数 avg 平均值 sum 求和 array_agg 把数据放到一个数组 统计 函数 描述 var / var_samp 返回给定列的样本方差 var_pop 返回给定列的总体方差 stddev / stddev_samp 返回给定列的样本标准差 stddev_pop 返回给定列的总体标准差 covar / covar_samp 返回给定列的样本协方差 covar_pop 返回给定列的总体协方差 corr 返回给定列的相关系数 估值函数 函数 描述 approx_distinct 返回输入值的近似去重数量（HyperLogLog） approx_median 返回输入值的近似中位数，它是 approx_percentile_cont(x, 0.5) 的简单写法 approx_percentile_cont 返回输入值的近似百分位数（TDigest），其中 p 是 0 和 1（包括）之间的 float64，等同于 approx_percentile_cont_with_weight(x, 1, p) approx_percentile_cont_with_weight 返回输入值带权重的近似百分位数（TDigest），其中 w 是权重列表达式，p 是 0 和 1（包括）之间的 float64</description></item></channel></rss>