<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://horaedb.apache.org/cn/docs/user-guide/sdk/><link rel=alternate type=application/rss+xml href=https://horaedb.apache.org/cn/docs/user-guide/sdk/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>SDK 文档 | Apache HoraeDB</title><meta name=description content="一款高性能、分布式的云原生时序数据库"><meta property="og:url" content="https://horaedb.apache.org/cn/docs/user-guide/sdk/"><meta property="og:site_name" content="Apache HoraeDB"><meta property="og:title" content="SDK 文档"><meta property="og:description" content="一款高性能、分布式的云原生时序数据库"><meta property="og:locale" content="cn"><meta property="og:type" content="website"><meta itemprop=name content="SDK 文档"><meta itemprop=description content="一款高性能、分布式的云原生时序数据库"><meta itemprop=dateModified content="2024-08-21T10:34:40+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SDK 文档"><meta name=twitter:description content="一款高性能、分布式的云原生时序数据库"><link rel=preload href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css as=style integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><link href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css rel=stylesheet integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/cn/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Apache HoraeDB</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/cn/docs/><i class='fa-solid fa-book'></i><span>文档</span></a></li><li class=nav-item><a class=nav-link href=/cn/downloads/><i class='fa-solid fa-download'></i><span>下载</span></a></li><li class=nav-item><a class=nav-link href=/cn/blog/><i class='fa-brands fa-blogger'></i><span>博客</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><ul class=dropdown-menu><li><a class=dropdown-item href=/docs/user-guide/sdk/>English</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.f30b516f185ce404dc6ca8ec502fea64.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/cn/docs/user-guide/sdk/>Return to the regular view of this page</a>.</p></div><h1 class=title>SDK 文档</h1><ul><li>1: <a href=#pg-c736df40c4147174f6f2d1eaeb49bdca>Go</a></li><li>2: <a href=#pg-66074b15694ea31d990c645c25042bca>Java</a></li><li>3: <a href=#pg-d8c6cac92b3914596fc657a1fa438885>Python</a></li><li>4: <a href=#pg-8b17bc3ecdfd6226bf296cc8d8c38345>Rust</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-c736df40c4147174f6f2d1eaeb49bdca>1 - Go</h1><h2 id=安装>安装</h2><pre tabindex=0><code>go get github.com/apache/incubator-horaedb-client-go
</code></pre><p>你可以在这里找到最新的版本 <a href=https://github.com/apache/incubator-horaedb-client-go/tags>here</a>.</p><h2 id=如何使用>如何使用</h2><h3 id=初始化客户端>初始化客户端</h3><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	client, err <span style=color:#666>:=</span> horaedb.<span style=color:#00f>NewClient</span>(endpoint, horaedb.Direct,
</span></span><span style=display:flex><span>		horaedb.<span style=color:#00f>WithDefaultDatabase</span>(<span style=color:#ba2121>&#34;public&#34;</span>), <span style=color:#408080;font-style:italic>// Client所使用的database
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>	)
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>参数名称</th><th>说明</th></tr></thead><tbody><tr><td>defaultDatabase</td><td>所使用的 database，可以被单个 <code>Write</code> 或者 <code>SQLRequest</code> 请求中的 database 覆盖</td></tr><tr><td>RPCMaxRecvMsgSize</td><td>grpc <code>MaxCallRecvMsgSize</code> 配置, 默认是 1024 _ 1024 _ 1024</td></tr><tr><td>RouteMaxCacheSize</td><td>如果 router 客户端中的 路由缓存超过了这个值，将会淘汰最不活跃的直至降低这个阈值, 默认是 10000</td></tr></tbody></table><p>注意： HoraeDB 当前仅支持预创建的 <code>public</code> database , 未来会支持多个 database。</p><h3 id=管理表>管理表</h3><p>HoraeDB 使用 SQL 来管理表格，比如创建表、删除表或者新增列等等，这和你在使用 SQL 管理其他的数据库时没有太大的区别。</p><p>为了方便使用，在使用 gRPC 的 write 接口进行写入时，如果某个表不存在，HoraeDB 会根据第一次的写入自动创建一个表。</p><p>当然你也可以通过 <code>create table</code> 语句来更精细化的管理的表（比如添加索引等）。</p><p><strong>创建表的样例</strong></p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	createTableSQL <span style=color:#666>:=</span> <span style=color:#ba2121>`
</span></span></span><span style=display:flex><span><span style=color:#ba2121>		CREATE TABLE IF NOT EXISTS demo (
</span></span></span><span style=display:flex><span><span style=color:#ba2121>			name string TAG,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>			value double,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>			t timestamp NOT NULL,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>			TIMESTAMP KEY(t)
</span></span></span><span style=display:flex><span><span style=color:#ba2121>		) ENGINE=Analytic with (enable_ttl=false)`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	req <span style=color:#666>:=</span> horaedb.SQLQueryRequest{
</span></span><span style=display:flex><span>		Tables: []<span style=color:#b00040>string</span>{<span style=color:#ba2121>&#34;demo&#34;</span>},
</span></span><span style=display:flex><span>		SQL:    createTableSQL,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	resp, err <span style=color:#666>:=</span> client.<span style=color:#00f>SQLQuery</span>(context.<span style=color:#00f>Background</span>(), req)
</span></span></code></pre></td></tr></table></div></div><p><strong>删除表的样例</strong></p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	dropTableSQL <span style=color:#666>:=</span> <span style=color:#ba2121>`DROP TABLE demo`</span>
</span></span><span style=display:flex><span>	req <span style=color:#666>:=</span> horaedb.SQLQueryRequest{
</span></span><span style=display:flex><span>		Tables: []<span style=color:#b00040>string</span>{<span style=color:#ba2121>&#34;demo&#34;</span>},
</span></span><span style=display:flex><span>		SQL:    dropTableSQL,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	resp, err <span style=color:#666>:=</span> client.<span style=color:#00f>SQLQuery</span>(context.<span style=color:#00f>Background</span>(), req)
</span></span></code></pre></td></tr></table></div></div><h3 id=构建写入数据>构建写入数据</h3><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	points <span style=color:#666>:=</span> <span style=color:green>make</span>([]horaedb.Point, <span style=color:#666>0</span>, <span style=color:#666>2</span>)
</span></span><span style=display:flex><span>	<span style=color:green;font-weight:700>for</span> i <span style=color:#666>:=</span> <span style=color:#666>0</span>; i &lt; <span style=color:#666>2</span>; i<span style=color:#666>++</span> {
</span></span><span style=display:flex><span>		point, err <span style=color:#666>:=</span> horaedb.<span style=color:#00f>NewPointBuilder</span>(<span style=color:#ba2121>&#34;demo&#34;</span>).
</span></span><span style=display:flex><span>			<span style=color:#00f>SetTimestamp</span>(now)).
</span></span><span style=display:flex><span>			<span style=color:#00f>AddTag</span>(<span style=color:#ba2121>&#34;name&#34;</span>, horaedb.<span style=color:#00f>NewStringValue</span>(<span style=color:#ba2121>&#34;test_tag1&#34;</span>)).
</span></span><span style=display:flex><span>			<span style=color:#00f>AddField</span>(<span style=color:#ba2121>&#34;value&#34;</span>, horaedb.<span style=color:#00f>NewDoubleValue</span>(<span style=color:#666>0.4242</span>)).
</span></span><span style=display:flex><span>			<span style=color:#00f>Build</span>()
</span></span><span style=display:flex><span>		<span style=color:green;font-weight:700>if</span> err <span style=color:#666>!=</span> <span style=color:green;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:green>panic</span>(err)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		points = <span style=color:green>append</span>(points, point)
</span></span><span style=display:flex><span>	}
</span></span></code></pre></td></tr></table></div></div><h3 id=写入数据>写入数据</h3><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	req <span style=color:#666>:=</span> horaedb.WriteRequest{
</span></span><span style=display:flex><span>		Points: points,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	resp, err <span style=color:#666>:=</span> client.<span style=color:#00f>Write</span>(context.<span style=color:#00f>Background</span>(), req)
</span></span></code></pre></td></tr></table></div></div><h3 id=查询数据>查询数据</h3><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	querySQL <span style=color:#666>:=</span> <span style=color:#ba2121>`SELECT * FROM demo`</span>
</span></span><span style=display:flex><span>	req <span style=color:#666>:=</span> horaedb.SQLQueryRequest{
</span></span><span style=display:flex><span>		Tables: []<span style=color:#b00040>string</span>{<span style=color:#ba2121>&#34;demo&#34;</span>},
</span></span><span style=display:flex><span>		SQL:    querySQL,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	resp, err <span style=color:#666>:=</span> client.<span style=color:#00f>SQLQuery</span>(context.<span style=color:#00f>Background</span>(), req)
</span></span><span style=display:flex><span>	<span style=color:green;font-weight:700>if</span> err <span style=color:#666>!=</span> <span style=color:green;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:green>panic</span>(err)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.<span style=color:#00f>Printf</span>(<span style=color:#ba2121>&#34;query table success, rows:%+v\n&#34;</span>, resp.Rows)
</span></span></code></pre></td></tr></table></div></div><h2 id=示例>示例</h2><p>你可以在<a href=https://github.com/apache/incubator-horaedb-client-go/blob/main/examples/read_write.go>这里</a>找到完整的示例。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-66074b15694ea31d990c645c25042bca>2 - Java</h1><h2 id=介绍>介绍</h2><p>HoraeDBClient 是 HoraeDB 的高性能 Java 版客户端。</p><h2 id=环境要求>环境要求</h2><p>Java 8 及以上</p><h2 id=依赖>依赖</h2><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:green;font-weight:700>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&lt;groupId&gt;</span>io.ceresdb<span style=color:green;font-weight:700>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&lt;artifactId&gt;</span>ceresdb-all<span style=color:green;font-weight:700>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&lt;version&gt;</span>${CERESDB.VERSION}<span style=color:green;font-weight:700>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>最新的版本可以从<a href=https://github.com/apache/incubator-horaedb-client-java/blob/main/docs/CHANGELOG.md>这里</a>获取。</p><h2 id=初始化客户端>初始化客户端</h2><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#408080;font-style:italic>// CeresDB options</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>CeresDBOptions<span style=color:#bbb> </span>opts<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>CeresDBOptions.<span style=color:#7d9029>newBuilder</span>(<span style=color:#ba2121>&#34;127.0.0.1&#34;</span>,<span style=color:#bbb> </span>8831,<span style=color:#bbb> </span>DIRECT)<span style=color:#bbb> </span><span style=color:#408080;font-style:italic>// 默认 gprc 端口号，DIRECT 模式</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>database</span>(<span style=color:#ba2121>&#34;public&#34;</span>)<span style=color:#bbb> </span><span style=color:#408080;font-style:italic>// Client所使用的database，可被RequestContext的database覆盖</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>writeMaxRetries</span>(1)<span style=color:#bbb> </span><span style=color:#408080;font-style:italic>// 写入失败重试次数上限（只有部分错误 code 才会重试，比如路由表失效）</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>readMaxRetries</span>(1)<span style=color:#bbb>  </span><span style=color:#408080;font-style:italic>// 查询失败重试次数上限（只有部分错误 code 才会重试，比如路由表失效）</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>build</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>CeresDBClient<span style=color:#bbb> </span>client<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>CeresDBClient();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>if</span><span style=color:#bbb> </span>(<span style=color:#666>!</span>client.<span style=color:#7d9029>init</span>(opts))<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>throw</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>IllegalStateException(<span style=color:#ba2121>&#34;Fail to start CeresDBClient&#34;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>客户端初始化至少需要三个参数：</p><ul><li>EndPoint： 127.0.0.1</li><li>Port： 8831</li><li>RouteMode： DIRECT/PROXY</li></ul><p>这里重点解释下 <code>RouteMode</code> 参数，<code>PROXY</code> 模式用在客户端和服务端存在网络隔离，请求需要经过转发的场景；<code>DIRECT</code> 模式用在客户端和服务端网络连通的场景，节省转发的开销，具有更高的性能。
更多的参数配置详情见 <a href=https://github.com/apache/incubator-horaedb-client-java/tree/main/docs/configuration.md>configuration</a>。</p><p>注意： HoraeDB 当前仅支持默认的 <code>public</code> database , 未来会支持多个 database。</p><h2 id=建表>建表</h2><p>为了方便使用，在使用 gRPC 的 write 接口进行写入时，如果某个表不存在，HoraeDB 会根据第一次的写入自动创建一个表。</p><p>当然你也可以通过 <code>create table</code> 语句来更精细化的管理的表（比如添加索引等）。</p><p>下面的建表语句（使用 SDK 的 SQL API）包含了 HoraeDB 支持的所有字段类型：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String<span style=color:#bbb> </span>createTableSql<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;CREATE TABLE IF NOT EXISTS machine_table(&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;ts TIMESTAMP NOT NULL,&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;city STRING TAG NOT NULL,&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;ip STRING TAG NOT NULL,&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;cpu DOUBLE NULL,&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;mem DOUBLE NULL,&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;TIMESTAMP KEY(ts)&#34;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb> </span><span style=color:#408080;font-style:italic>// 建表时必须指定时间戳序列</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#ba2121>&#34;) ENGINE=Analytic&#34;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Result<span style=color:#666>&lt;</span>SqlQueryOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;</span><span style=color:#bbb> </span>createResult<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>sqlQuery</span>(<span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>SqlQueryRequest(createTableSql)).<span style=color:#7d9029>get</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>if</span><span style=color:#bbb> </span>(<span style=color:#666>!</span>createResult.<span style=color:#7d9029>isOk</span>())<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>throw</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>IllegalStateException(<span style=color:#ba2121>&#34;Fail to create table&#34;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=删表>删表</h2><p>下面是一个删表的示例：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String<span style=color:#bbb> </span>dropTableSql<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;DROP TABLE machine_table&#34;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Result<span style=color:#666>&lt;</span>SqlQueryOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;</span><span style=color:#bbb> </span>dropResult<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>sqlQuery</span>(<span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>SqlQueryRequest(dropTableSql)).<span style=color:#7d9029>get</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>if</span><span style=color:#bbb> </span>(<span style=color:#666>!</span>dropResult.<span style=color:#7d9029>isOk</span>())<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>throw</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>IllegalStateException(<span style=color:#ba2121>&#34;Fail to drop table&#34;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=数据写入>数据写入</h2><p>首先我们需要构建数据，示例如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#666>&lt;</span>Point<span style=color:#666>&gt;</span><span style=color:#bbb> </span>pointList<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>new</span><span style=color:#bbb> </span>LinkedList<span style=color:#666>&lt;&gt;</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>for</span><span style=color:#bbb> </span>(<span style=color:#b00040>int</span><span style=color:#bbb> </span>i<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>0;<span style=color:#bbb> </span>i<span style=color:#bbb> </span><span style=color:#666>&lt;</span><span style=color:#bbb> </span>100;<span style=color:#bbb> </span>i<span style=color:#666>++</span>)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#408080;font-style:italic>// 构建单个Point</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Point<span style=color:#bbb> </span>point<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Point.<span style=color:#7d9029>newPointBuilder</span>(<span style=color:#ba2121>&#34;machine_table&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>setTimestamp</span>(t0)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>addTag</span>(<span style=color:#ba2121>&#34;city&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;Singapore&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>addTag</span>(<span style=color:#ba2121>&#34;ip&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;10.0.0.1&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>addField</span>(<span style=color:#ba2121>&#34;cpu&#34;</span>,<span style=color:#bbb> </span>Value.<span style=color:#7d9029>withDouble</span>(0.<span style=color:#7d9029>23</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>addField</span>(<span style=color:#ba2121>&#34;mem&#34;</span>,<span style=color:#bbb> </span>Value.<span style=color:#7d9029>withDouble</span>(0.<span style=color:#7d9029>55</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>.<span style=color:#7d9029>build</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>points.<span style=color:#7d9029>add</span>(point);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>然后使用 <code>write</code> 接口写入数据，示例如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>CompletableFuture<span style=color:#666>&lt;</span>Result<span style=color:#666>&lt;</span>WriteOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;&gt;</span><span style=color:#bbb> </span>wf<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>write</span>(pointList);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 这里用 `future.get` 只是方便演示，推荐借助 CompletableFuture 强大的 API 实现异步编程</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Result<span style=color:#666>&lt;</span>WriteOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;</span><span style=color:#bbb> </span>writeResult<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>wf.<span style=color:#7d9029>get</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertTrue</span>(writeResult.<span style=color:#7d9029>isOk</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(3,<span style=color:#bbb> </span>writeResult.<span style=color:#7d9029>getOk</span>().<span style=color:#7d9029>getSuccess</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// `Result` 类参考了 Rust 语言，提供了丰富的 mapXXX、andThen 类 function 方便对结果值进行转换，提高编程效率，欢迎参考 API 文档使用</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(3,<span style=color:#bbb> </span>writeResult.<span style=color:#7d9029>mapOr</span>(0,<span style=color:#bbb> </span>WriteOk::getSuccess).<span style=color:#7d9029>intValue</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(0,<span style=color:#bbb> </span>writeResult.<span style=color:#7d9029>getOk</span>().<span style=color:#7d9029>getFailed</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(0,<span style=color:#bbb> </span>writeResult.<span style=color:#7d9029>mapOr</span>(<span style=color:#666>-</span>1,<span style=color:#bbb> </span>WriteOk::getFailed).<span style=color:#7d9029>intValue</span>());<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>详情见 <a href=https://github.com/apache/incubator-horaedb-client-java/tree/main/docs/write.md>write</a></p><h2 id=数据查询>数据查询</h2><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>SqlQueryRequest<span style=color:#bbb> </span>queryRequest<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>SqlQueryRequest.<span style=color:#7d9029>newBuilder</span>()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>forTables</span>(<span style=color:#ba2121>&#34;machine_table&#34;</span>)<span style=color:#bbb> </span><span style=color:#408080;font-style:italic>// 这里表名是可选的，如果未提供，SDK将自动解析SQL填充表名并自动路由</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>sql</span>(<span style=color:#ba2121>&#34;select * from machine_table where ts = %d&#34;</span>,<span style=color:#bbb> </span>t0)<span style=color:#bbb> </span><span style=color:#408080;font-style:italic>//</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>build</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>CompletableFuture<span style=color:#666>&lt;</span>Result<span style=color:#666>&lt;</span>SqlQueryOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;&gt;</span><span style=color:#bbb> </span>qf<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>sqlQuery</span>(queryRequest);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 这里用 `future.get` 只是方便演示，推荐借助 CompletableFuture 强大的 API 实现异步编程</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Result<span style=color:#666>&lt;</span>SqlQueryOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;</span><span style=color:#bbb> </span>queryResult<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>qf.<span style=color:#7d9029>get</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertTrue</span>(queryResult.<span style=color:#7d9029>isOk</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>SqlQueryOk<span style=color:#bbb> </span>queryOk<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>queryResult.<span style=color:#7d9029>getOk</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(1,<span style=color:#bbb> </span>queryOk.<span style=color:#7d9029>getRowCount</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 直接获取结果数组</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>List<span style=color:#666>&lt;</span>Row<span style=color:#666>&gt;</span><span style=color:#bbb> </span>rows<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>queryOk.<span style=color:#7d9029>getRowList</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(t0,<span style=color:#bbb> </span>rows.<span style=color:#7d9029>get</span>(0).<span style=color:#7d9029>getColumn</span>(<span style=color:#ba2121>&#34;ts&#34;</span>).<span style=color:#7d9029>getValue</span>().<span style=color:#7d9029>getTimestamp</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(<span style=color:#ba2121>&#34;Singapore&#34;</span>,<span style=color:#bbb> </span>rows.<span style=color:#7d9029>get</span>(0).<span style=color:#7d9029>getColumn</span>(<span style=color:#ba2121>&#34;city&#34;</span>).<span style=color:#7d9029>getValue</span>().<span style=color:#7d9029>getString</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(<span style=color:#ba2121>&#34;10.0.0.1&#34;</span>,<span style=color:#bbb> </span>rows.<span style=color:#7d9029>get</span>(0).<span style=color:#7d9029>getColumn</span>(<span style=color:#ba2121>&#34;ip&#34;</span>).<span style=color:#7d9029>getValue</span>().<span style=color:#7d9029>getString</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(0.<span style=color:#7d9029>23</span>,<span style=color:#bbb> </span>rows.<span style=color:#7d9029>get</span>(0).<span style=color:#7d9029>getColumn</span>(<span style=color:#ba2121>&#34;cpu&#34;</span>).<span style=color:#7d9029>getValue</span>().<span style=color:#7d9029>getDouble</span>(),<span style=color:#bbb> </span>0.<span style=color:#7d9029>0000001</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(0.<span style=color:#7d9029>55</span>,<span style=color:#bbb> </span>rows.<span style=color:#7d9029>get</span>(0).<span style=color:#7d9029>getColumn</span>(<span style=color:#ba2121>&#34;mem&#34;</span>).<span style=color:#7d9029>getValue</span>().<span style=color:#7d9029>getDouble</span>(),<span style=color:#bbb> </span>0.<span style=color:#7d9029>0000001</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// 获取结果流</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Stream<span style=color:#666>&lt;</span>Row<span style=color:#666>&gt;</span><span style=color:#bbb> </span>rowStream<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>queryOk.<span style=color:#7d9029>stream</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>rowStream.<span style=color:#7d9029>forEach</span>(row<span style=color:#bbb> </span><span style=color:#666>-&gt;</span><span style=color:#bbb> </span>System.<span style=color:#7d9029>out</span>.<span style=color:#7d9029>println</span>(row.<span style=color:#7d9029>toString</span>()));<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>详情见 <a href=https://github.com/apache/incubator-horaedb-client-java/tree/main/docs/read.md>read</a></p><h2 id=流式读写>流式读写</h2><p>HoraeDB 支持流式读写，适用于大规模数据读写。</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#b00040>long</span><span style=color:#bbb> </span>start<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>System.<span style=color:#7d9029>currentTimeMillis</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#b00040>long</span><span style=color:#bbb> </span>t<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>start;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>StreamWriteBuf<span style=color:#666>&lt;</span>Point,<span style=color:#bbb> </span>WriteOk<span style=color:#666>&gt;</span><span style=color:#bbb> </span>writeBuf<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>streamWrite</span>(<span style=color:#ba2121>&#34;machine_table&#34;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>for</span><span style=color:#bbb> </span>(<span style=color:#b00040>int</span><span style=color:#bbb> </span>i<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>0;<span style=color:#bbb> </span>i<span style=color:#bbb> </span><span style=color:#666>&lt;</span><span style=color:#bbb> </span>1000;<span style=color:#bbb> </span>i<span style=color:#666>++</span>)<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Point<span style=color:#bbb> </span>streamData<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Point.<span style=color:#7d9029>newPointBuilder</span>(<span style=color:#ba2121>&#34;machine_table&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>setTimestamp</span>(t)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>addTag</span>(<span style=color:#ba2121>&#34;city&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;Beijing&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>addTag</span>(<span style=color:#ba2121>&#34;ip&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;10.0.0.3&#34;</span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>addField</span>(<span style=color:#ba2121>&#34;cpu&#34;</span>,<span style=color:#bbb> </span>Value.<span style=color:#7d9029>withDouble</span>(0.<span style=color:#7d9029>42</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>addField</span>(<span style=color:#ba2121>&#34;mem&#34;</span>,<span style=color:#bbb> </span>Value.<span style=color:#7d9029>withDouble</span>(0.<span style=color:#7d9029>67</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span>.<span style=color:#7d9029>build</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>writeBuf.<span style=color:#7d9029>writeAndFlush</span>(Collections.<span style=color:#7d9029>singletonList</span>(streamData));<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>t<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>t<span style=color:#666>+</span>1;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>CompletableFuture<span style=color:#666>&lt;</span>WriteOk<span style=color:#666>&gt;</span><span style=color:#bbb> </span>writeOk<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>writeBuf.<span style=color:#7d9029>completed</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(1000,<span style=color:#bbb> </span>writeOk.<span style=color:#7d9029>join</span>().<span style=color:#7d9029>getSuccess</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>SqlQueryRequest<span style=color:#bbb> </span>streamQuerySql<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>SqlQueryRequest.<span style=color:#7d9029>newBuilder</span>()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.<span style=color:#7d9029>sql</span>(<span style=color:#ba2121>&#34;select * from %s where city = &#39;%s&#39; and ts &gt;= %d and ts &lt; %d&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;machine_table&#34;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#34;Beijing&#34;</span>,<span style=color:#bbb> </span>start,<span style=color:#bbb> </span>t).<span style=color:#7d9029>build</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>final</span><span style=color:#bbb> </span>Result<span style=color:#666>&lt;</span>SqlQueryOk,<span style=color:#bbb> </span>Err<span style=color:#666>&gt;</span><span style=color:#bbb> </span>streamQueryResult<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.<span style=color:#7d9029>sqlQuery</span>(streamQuerySql).<span style=color:#7d9029>get</span>();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertTrue</span>(streamQueryResult.<span style=color:#7d9029>isOk</span>());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>Assert.<span style=color:#7d9029>assertEquals</span>(1000,<span style=color:#bbb> </span>streamQueryResult.<span style=color:#7d9029>getOk</span>().<span style=color:#7d9029>getRowCount</span>());<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>详情见 <a href=https://github.com/apache/incubator-horaedb-client-java/tree/main/docs/streaming.md>streaming</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-d8c6cac92b3914596fc657a1fa438885>3 - Python</h1><h2 id=介绍>介绍</h2><p><a href=https://pypi.org/project/ceresdb-client/>horaedb-client</a> 是 <a href=https://github.com/apache/incubator-horaedb>HoraeDB</a> python 客户端.</p><p>借助于 <a href=https://github.com/PyO3>PyO3</a>，python 客户端的实现实际上是基于 <a href=https://github.com/apache/incubator-horaedb-client-rs>rust 客户端</a> 的封装。</p><p>本手册将会介绍 python client 的一些基本用法，其中涉及到的完整示例，可以查看<a href=https://github.com/apache/incubator-horaedb-client-py/blob/main/examples/read_write.py>该示例代码</a>.</p><h2 id=环境要求>环境要求</h2><ul><li>Python >= 3.7</li></ul><h2 id=安装>安装</h2><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install ceresdb-client
</span></span></code></pre></td></tr></table></div></div><p>你可以在这里找到最新的版本 <a href=https://github.com/apache/incubator-horaedb-client-py/tags>here</a>.</p><h2 id=初始化客户端>初始化客户端</h2><p>首先介绍下如何初始化客户端，代码示例如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>asyncio</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>datetime</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>ceresdb_client</span> <span style=color:green;font-weight:700>import</span> Builder, RpcContext, PointBuilder, ValueBuilder, WriteRequest, SqlQueryRequest, Mode, RpcConfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rpc_config <span style=color:#666>=</span> RpcConfig()
</span></span><span style=display:flex><span>rpc_config <span style=color:#666>=</span> RpcConfig()
</span></span><span style=display:flex><span>rpc_config<span style=color:#666>.</span>thread_num <span style=color:#666>=</span> <span style=color:#666>1</span>
</span></span><span style=display:flex><span>rpc_config<span style=color:#666>.</span>default_write_timeout_ms <span style=color:#666>=</span> <span style=color:#666>1000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>builder <span style=color:#666>=</span> Builder(<span style=color:#ba2121>&#39;127.0.0.1:8831&#39;</span>, Mode<span style=color:#666>.</span>Direct)
</span></span><span style=display:flex><span>builder<span style=color:#666>.</span>set_rpc_config(rpc_config)
</span></span><span style=display:flex><span>builder<span style=color:#666>.</span>set_default_database(<span style=color:#ba2121>&#39;public&#39;</span>)
</span></span><span style=display:flex><span>client <span style=color:#666>=</span> builder<span style=color:#666>.</span>build()
</span></span></code></pre></td></tr></table></div></div><p>代码的最开始部分是依赖库的导入，在后面的示例中将省略这部分。</p><p>客户端初始化需要至少两个参数：</p><ul><li><code>Endpoint</code>： 服务端地址，由 ip 和端口组成，例如 <code>127.0.0.1：8831</code>;</li><li><code>Mode</code>: 客户端和服务端通信模式，有两种模式可供选择: <code>Direct</code> 和 <code>Proxy</code>。</li></ul><p>这里重点介绍下通信模式 <code>Mode</code>， 当客户端可以访问所有的服务器的时候，建议采用 <code>Direct</code> 模式，以减少转发开销；但是如果客户端访问服务器必须要经过网关，那么只能选择 <code>Proxy</code> 模式。</p><p>至于 <code>default_database</code>，会在执行 RPC 请求时未通过 <code>RpcContext</code> 设置 database 的情况下，将被作为目标 database 使用。</p><p>最后，通过配置 <code>RpcConfig</code>, 可以管理客户端使用的资源和调整其性能，所有的配置参数可以参考<a href=https://github.com/apache/incubator-horaedb-client-py/blob/main/ceresdb_client.pyi>这里</a>.</p><h2 id=建表>建表</h2><p>为了方便使用，在使用 gRPC 的 write 接口进行写入时，如果某个表不存在，HoraeDB 会根据第一次的写入自动创建一个表。</p><p>当然你也可以通过 <code>create table</code> 语句来更精细化的管理的表（比如添加索引等）。</p><p>初始化客户端后，建表示例如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>async_query</span>(client, ctx, req):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>await</span> client<span style=color:#666>.</span>sql_query(ctx, req)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>create_table_sql <span style=color:#666>=</span> <span style=color:#ba2121>&#39;CREATE TABLE IF NOT EXISTS demo ( </span><span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span><span style=color:#ba2121>    name string TAG, </span><span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span><span style=color:#ba2121>    value double, </span><span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span><span style=color:#ba2121>    t timestamp NOT NULL, </span><span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span><span style=color:#ba2121>    TIMESTAMP KEY(t)) ENGINE=Analytic with (enable_ttl=false)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>req <span style=color:#666>=</span> SqlQueryRequest([<span style=color:#ba2121>&#39;demo&#39;</span>], create_table_sql)
</span></span><span style=display:flex><span>rpc_ctx <span style=color:#666>=</span> RpcContext()
</span></span><span style=display:flex><span>rpc_ctx<span style=color:#666>.</span>database <span style=color:#666>=</span> <span style=color:#ba2121>&#39;public&#39;</span>
</span></span><span style=display:flex><span>rpc_ctx<span style=color:#666>.</span>timeout_ms <span style=color:#666>=</span> <span style=color:#666>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>event_loop <span style=color:#666>=</span> asyncio<span style=color:#666>.</span>get_event_loop()
</span></span><span style=display:flex><span>event_loop<span style=color:#666>.</span>run_until_complete(async_query(client, rpc_ctx, req))
</span></span></code></pre></td></tr></table></div></div><p><code>RpcContext</code> 可以用来指定目标 database （可以覆盖在初始化的时候设置的 default_space） 和超时参数。</p><h2 id=数据写入>数据写入</h2><p>可以使用 <code>PointBuilder</code> 来构建一个 point（实际上就是数据集的一行），多个 point 构成一个写入请求。</p><p>示例如下:</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>async</span> <span style=color:green;font-weight:700>def</span> <span style=color:#00f>async_write</span>(client, ctx, req):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> <span style=color:green;font-weight:700>await</span> client<span style=color:#666>.</span>write(ctx, req)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>point_builder <span style=color:#666>=</span> PointBuilder(<span style=color:#ba2121>&#39;demo&#39;</span>)
</span></span><span style=display:flex><span>point_builder<span style=color:#666>.</span>set_timestamp(<span style=color:#666>1000</span> <span style=color:#666>*</span> <span style=color:green>int</span>(<span style=color:green>round</span>(datetime<span style=color:#666>.</span>datetime<span style=color:#666>.</span>now()<span style=color:#666>.</span>timestamp())))
</span></span><span style=display:flex><span>point_builder<span style=color:#666>.</span>set_tag(<span style=color:#ba2121>&#34;name&#34;</span>, ValueBuilder()<span style=color:#666>.</span>string(<span style=color:#ba2121>&#34;test_tag1&#34;</span>))
</span></span><span style=display:flex><span>point_builder<span style=color:#666>.</span>set_field(<span style=color:#ba2121>&#34;value&#34;</span>, ValueBuilder()<span style=color:#666>.</span>double(<span style=color:#666>0.4242</span>))
</span></span><span style=display:flex><span>point <span style=color:#666>=</span> point_builder<span style=color:#666>.</span>build()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>write_request <span style=color:#666>=</span> WriteRequest()
</span></span><span style=display:flex><span>write_request<span style=color:#666>.</span>add_point(point)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>event_loop <span style=color:#666>=</span> asyncio<span style=color:#666>.</span>get_event_loop()
</span></span><span style=display:flex><span>event_loop<span style=color:#666>.</span>run_until_complete(async_write(client, ctx, req))
</span></span></code></pre></td></tr></table></div></div><h2 id=数据查询>数据查询</h2><p>通过 <code>sql_query</code> 接口, 可以方便地从服务端查询数据：</p><pre tabindex=0><code>req = SqlQueryRequest([&#39;demo&#39;], &#39;select * from demo&#39;)
event_loop = asyncio.get_event_loop()
resp = event_loop.run_until_complete(async_query(client, ctx, req))
</code></pre><p>如示例所展示, 构建 <code>SqlQueryRequest</code> 需要两个参数:</p><ul><li>查询 sql 中涉及到的表；</li><li>查询 sql.</li></ul><p>当前为了查询的性能，第一个参数是必须的。</p><p>查询到数据后，逐行逐列处理数据的示例如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic># Access row by index in the resp.</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> row_idx <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>0</span>, resp<span style=color:#666>.</span>num_rows()):
</span></span><span style=display:flex><span>    row_tokens <span style=color:#666>=</span> []
</span></span><span style=display:flex><span>    row <span style=color:#666>=</span> resp<span style=color:#666>.</span>row_by_idx(row_idx)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>for</span> col_idx <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>0</span>, row<span style=color:#666>.</span>num_cols()):
</span></span><span style=display:flex><span>        col <span style=color:#666>=</span> row<span style=color:#666>.</span>column_by_idx(col_idx)
</span></span><span style=display:flex><span>        row_tokens<span style=color:#666>.</span>append(<span style=color:#ba2121>f</span><span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>name()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>:</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>value()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>#</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>data_type()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>f</span><span style=color:#ba2121>&#34;row#</span><span style=color:#b68;font-weight:700>{</span>row_idx<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>: </span><span style=color:#b68;font-weight:700>{</span><span style=color:#ba2121>&#39;,&#39;</span><span style=color:#666>.</span>join(row_tokens)<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Access row by iter in the resp.</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> row <span style=color:#a2f;font-weight:700>in</span> resp<span style=color:#666>.</span>iter_rows():
</span></span><span style=display:flex><span>    row_tokens <span style=color:#666>=</span> []
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>for</span> col <span style=color:#a2f;font-weight:700>in</span> row<span style=color:#666>.</span>iter_columns():
</span></span><span style=display:flex><span>        row_tokens<span style=color:#666>.</span>append(<span style=color:#ba2121>f</span><span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>name()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>:</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>value()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>#</span><span style=color:#b68;font-weight:700>{</span>col<span style=color:#666>.</span>data_type()<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>f</span><span style=color:#ba2121>&#34;row: </span><span style=color:#b68;font-weight:700>{</span><span style=color:#ba2121>&#39;,&#39;</span><span style=color:#666>.</span>join(row_tokens)<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><h2 id=删表>删表</h2><p>和创建表类似，我们可以使用 sql 来删除表：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>drop_table_sql <span style=color:#666>=</span> <span style=color:#ba2121>&#39;DROP TABLE demo&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>req <span style=color:#666>=</span> SqlQueryRequest([<span style=color:#ba2121>&#39;demo&#39;</span>], drop_table_sql)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>event_loop <span style=color:#666>=</span> asyncio<span style=color:#666>.</span>get_event_loop()
</span></span><span style=display:flex><span>event_loop<span style=color:#666>.</span>run_until_complete(async_query(client, rpc_ctx, req))
</span></span></code></pre></td></tr></table></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8b17bc3ecdfd6226bf296cc8d8c38345>4 - Rust</h1><h2 id=安装>安装</h2><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cargo add ceresdb-client
</span></span></code></pre></td></tr></table></div></div><p>你可以在这里找到最新的版本 <a href=https://github.com/apache/incubator-horaedb-client-rs/tags>here</a>.</p><h2 id=初始化客户端>初始化客户端</h2><p>首先，我们需要初始化客户端。</p><ul><li>创建客户端的 builder，你必须设置 <code>endpoint</code> 和 <code>mode</code>：<ul><li><code>endpoint</code> 是类似 &ldquo;ip/domain_name:port&rdquo; 形式的字符串。</li><li><code>mode</code> 用于指定访问 HoraeDB 服务器的方式，<a href=https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/db_client/builder.rs#L20>关于 mode 的详细信息</a>。</li></ul></li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>mut</span><span style=color:#bbb> </span>builder<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Builder::new(<span style=color:#ba2121>&#34;ip/domain_name:port&#34;</span>,<span style=color:#bbb> </span>Mode::Direct<span style=color:#666>/</span>Mode::Proxy);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>创建和设置 <code>rpc_config</code>，可以按需进行定义或者直接使用默认值，更多详细参数请参考<a href=https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/options.rs>这里</a>：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>rpc_config<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>RpcConfig<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>thread_num: <span style=color:green>Some</span>(<span style=color:#666>1</span>),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>default_write_timeout: <span style=color:#00f;font-weight:700>Duration</span>::from_millis(<span style=color:#666>1000</span>),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#666>..</span><span style=color:green>Default</span>::default()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>builder<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>builder.rpc_config(rpc_config);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>设置 <code>default_database</code>，这会在执行 RPC 请求时未通过 RpcContext 设置 database 的情况下，将被作为目标 database 使用。</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>builder<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>builder.default_database(<span style=color:#ba2121>&#34;public&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>最后，我们从 builder 中创建客户端：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>client<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>builder.build();<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=管理表>管理表</h2><p>为了方便使用，在使用 gRPC 的 write 接口进行写入时，如果某个表不存在，HoraeDB 会根据第一次的写入自动创建一个表。</p><p>当然你也可以通过 <code>create table</code> 语句来更精细化的管理的表（比如添加索引等）。</p><ul><li>建表:</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>create_table_sql<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>r</span><span style=color:#ba2121>#&#34;CREATE TABLE IF NOT EXISTS horaedb (
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            str_tag string TAG,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            int_tag int32 TAG,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            var_tag varbinary TAG,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            str_field string,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            int_field int32,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            bin_field varbinary,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            t timestamp NOT NULL,
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            TIMESTAMP KEY(t)) ENGINE=Analytic with
</span></span></span><span style=display:flex><span><span style=color:#ba2121>            (enable_ttl=&#39;false&#39;)&#34;#</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>req<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>SqlQueryRequest<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>tables: <span style=color:#00f;font-weight:700>vec</span><span style=color:#666>!</span>[<span style=color:#ba2121>&#34;horaedb&#34;</span>.to_string()],<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>sql: <span style=color:#00f;font-weight:700>create_table_sql</span>.to_string(),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>resp<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.sql_query(rpc_ctx,<span style=color:#bbb> </span><span style=color:#666>&amp;</span>req)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.<span style=color:green;font-weight:700>await</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.expect(<span style=color:#ba2121>&#34;Should succeed to create table&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>删表：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>drop_table_sql<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;DROP TABLE horaedb&#34;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>req<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>SqlQueryRequest<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>tables: <span style=color:#00f;font-weight:700>vec</span><span style=color:#666>!</span>[<span style=color:#ba2121>&#34;horaedb&#34;</span>.to_string()],<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>sql: <span style=color:#00f;font-weight:700>drop_table_sql</span>.to_string(),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>resp<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.sql_query(rpc_ctx,<span style=color:#bbb> </span><span style=color:#666>&amp;</span>req)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.<span style=color:green;font-weight:700>await</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>.expect(<span style=color:#ba2121>&#34;Should succeed to create table&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=写入数据>写入数据</h2><p>我们支持使用类似 <a href=https://awesome.influxdata.com/docs/part-2/influxdb-data-model>InfluxDB</a> 的时序数据模型进行写入。</p><ul><li>利用 <code>PointBuilder</code> 创建 <code>point</code>，<code>tag value</code> 和 <code>field value</code> 的相关数据结构为 <code>Value</code>，[<code>Value</code> 的详细信息](detail about Value](<a href=https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/model/value.rs>https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/model/value.rs</a>：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>test_table<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;horaedb&#34;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>ts<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Local::now().timestamp_millis();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>point<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>PointBuilder::new(test_table.to_string())<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.timestamp(ts)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.tag(<span style=color:#ba2121>&#34;str_tag&#34;</span>.to_string(),<span style=color:#bbb> </span>Value::<span style=color:green>String</span>(<span style=color:#ba2121>&#34;tag_val&#34;</span>.to_string()))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.tag(<span style=color:#ba2121>&#34;int_tag&#34;</span>.to_string(),<span style=color:#bbb> </span>Value::Int32(<span style=color:#666>42</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.tag(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#ba2121>&#34;var_tag&#34;</span>.to_string(),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>Value::Varbinary(<span style=color:#ba2121>b</span><span style=color:#ba2121>&#34;tag_bin_val&#34;</span>.to_vec()),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.field(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#ba2121>&#34;str_field&#34;</span>.to_string(),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>Value::<span style=color:green>String</span>(<span style=color:#ba2121>&#34;field_val&#34;</span>.to_string()),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.field(<span style=color:#ba2121>&#34;int_field&#34;</span>.to_string(),<span style=color:#bbb> </span>Value::Int32(<span style=color:#666>42</span>))<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.field(<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#ba2121>&#34;bin_field&#34;</span>.to_string(),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span>Value::Varbinary(<span style=color:#ba2121>b</span><span style=color:#ba2121>&#34;field_bin_val&#34;</span>.to_vec()),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>)<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.build()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>.unwrap();<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>将 <code>point</code> 添加到 <code>write request</code> 中：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>mut</span><span style=color:#bbb> </span>write_req<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>WriteRequest::default();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>write_req.add_point(point);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>创建 <code>rpc_ctx</code>，同样地可以按需设置或者使用默认值，<code>rpc_ctx</code> 的详细信息请参考<a href=https://github.com/apache/incubator-horaedb-client-rs/blob/main/src/rpc_client/mod.rs#L23>这里</a>：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>rpc_ctx<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>RpcContext<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>database: <span style=color:green>Some</span>(<span style=color:#ba2121>&#34;public&#34;</span>.to_string()),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#666>..</span><span style=color:green>Default</span>::default()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>最后，利用客户端写入数据到服务器：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>rpc_ctx<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>RpcContext<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>database: <span style=color:green>Some</span>(<span style=color:#ba2121>&#34;public&#34;</span>.to_string()),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#666>..</span><span style=color:green>Default</span>::default()<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>resp<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.write(rpc_ctx,<span style=color:#bbb> </span><span style=color:#666>&amp;</span>write_req).<span style=color:green;font-weight:700>await</span>.expect(<span style=color:#ba2121>&#34;Should success to write&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=sql-query>Sql query</h2><p>我们支持使用 sql 进行数据查询。</p><ul><li>在 <code>sql query request</code> 中指定相关的表和 sql 语句：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>req<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>SqlQueryRequest<span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>tables: <span style=color:#00f;font-weight:700>vec</span><span style=color:#666>!</span>[table<span style=color:#bbb> </span>name<span style=color:#bbb> </span><span style=color:#666>1</span>,<span style=color:#666>..</span>.,table<span style=color:#bbb> </span>name<span style=color:#bbb> </span>n],<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>sql: <span style=color:#00f;font-weight:700>sql</span><span style=color:#bbb> </span>string<span style=color:#bbb> </span>(e.g.<span style=color:#bbb> </span>select<span style=color:#bbb> </span><span style=color:#666>*</span><span style=color:#bbb> </span>from<span style=color:#bbb> </span>xxx),<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>};<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>利用客户端进行查询：</li></ul><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>resp<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>client.sql_query(rpc_ctx,<span style=color:#bbb> </span><span style=color:#666>&amp;</span>req).<span style=color:green;font-weight:700>await</span>.expect(<span style=color:#ba2121>&#34;Should success to write&#34;</span>);<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=示例>示例</h2><p>你可以在本项目的仓库中找到<a href=https://github.com/apache/incubator-horaedb-client-rs/blob/main/examples/read_write.rs>完整的例子</a>。</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class=td-footer__center>Apache HoraeDB is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.<hr><span class=td-footer__copyright>&copy;
2023&ndash;2024
<span class=td-footer__authors><p>The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</p><p>Apache, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.</p></span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div><hr><div class="row mx-md-2"><div class=td-footer__center><span class=td-footer__copyright>Found a bug in website? <a href=https://github.com/apache/horaedb-docs/issues/new>Open an issue</a> or <a href=https://github.com/apache/horaedb-docs/pulls>submit a pull request</a> on GitHub.</span></div></div><hr></div></footer></div><script src=/js/main.min.f72d00502781aaf278a14088eb2356b1ba2a05ad698a0c43fe86314d74ceab56.js integrity="sha256-9y0AUCeBqvJ4oUCI6yNWsboqBa1pigxD/oYxTXTOq1Y=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>