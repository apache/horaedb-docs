<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://horaedb.apache.org/cn/blog/><link rel=alternate type=application/rss+xml href=https://horaedb.apache.org/cn/blog/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>博客 | Apache HoraeDB</title>
<meta name=description content="一款高性能、分布式的云原生时序数据库"><meta property="og:url" content="https://horaedb.apache.org/cn/blog/"><meta property="og:site_name" content="Apache HoraeDB"><meta property="og:title" content="博客"><meta property="og:description" content="一款高性能、分布式的云原生时序数据库"><meta property="og:locale" content="cn"><meta property="og:type" content="website"><meta itemprop=name content="博客"><meta itemprop=description content="一款高性能、分布式的云原生时序数据库"><meta itemprop=dateModified content="2024-08-21T14:19:34+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="博客"><meta name=twitter:description content="一款高性能、分布式的云原生时序数据库"><link rel=preload href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css as=style integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><link href=/scss/main.min.5e43f8574351718e9b44966c9f3a571202ed048c082f457fb574c10b1a1bc56c.css rel=stylesheet integrity="sha256-XkP4V0NRcY6bRJZsnzpXEgLtBIwIL0V/tXTBCxobxWw=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class="td-section td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/cn/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Apache HoraeDB</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/cn/docs/><i class='fa-solid fa-book'></i><span>文档</span></a></li><li class=nav-item><a class=nav-link href=/cn/downloads/><i class='fa-solid fa-download'></i><span>下载</span></a></li><li class=nav-item><a class="nav-link active" href=/cn/blog/><i class='fa-brands fa-blogger'></i><span>博客</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><ul class=dropdown-menu><li><a class=dropdown-item href=/blog/>English</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.8bb1a910efceb6c699a46427d8647a84.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/cn/blog/>Return to the regular view of this page</a>.</p></div><h1 class=title>博客</h1><ul><li><a href=#pg-1432320867fd5e95f5466675e9b08b9d>2024 年 ApacheCon 北美之旅的收获与感悟</a></li><li><a href=#pg-e4fd354ddb7d7e5a7570c033405812c5>2.1.0 版本发布</a></li><li><a href=#pg-c982cc77916f2fc8647c387a0a7af271>Apache HoraeDB 与你相约北京理工大学</a></li><li><a href=#pg-67741b823b6fd9d5e9cee92ab233780e>Apache HoraeDB 与你相约 Community Over Code 北美大会</a></li><li><a href=#pg-dc5fe0a66ed04232a469f74ae1148c11>欢迎 Apache HoraeDB 新晋 Committer： 鲍金日</a></li><li><a href=#pg-b432dd3ce58969edcac72ac8dda30692>预告：第一次线上会议</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-1432320867fd5e95f5466675e9b08b9d>2024 年 ApacheCon 北美之旅的收获与感悟</h1><div class="td-byline mb-4"><time datetime=2024-11-22 class=text-body-secondary>2024-11-22</time></div><p><a href=https://horaedb.apache.org/>Apache HoraeDB</a> 是 2023-12-11 加入 Apache 孵化器，由此拉开了我在 Apache 社区的成长探索之旅。作为一个历史悠久的基金会，Apache 旗下的软件可谓家喻户晓：Hadoop、Spark、Kafka 等等。 在这次 2024 年的 ApacheCon <a href=https://www.apachecon.com/>北美大会</a>上，我有幸代表 HoraeDB 社区参加，终于有机会来近距离和来自世界各地的 Apache 项目的 PMC 们交流。这次经历不仅让我深入理解了 Apache 项目的核心价值与贡献，还深刻认识到开源社区如何驱动技术创新、促进开发者之间的协作与分享。</p><p>这次大会在丹佛的君悦大酒店举行，为期四天（2024-10-07 ~ 10），讨论涉及搜索、大数据、物联网、社区等多个方面，从现场来看，讲师比嘉宾还要多，除了 Keynote 分享是在一个大会场进行，其他的场子均在一个小房间里，每个房间外会有一个电子屏展示今日的议题。全部日程见官网 <a href=https://communityovercode.org/schedule/>Sessions Schedule</a>。</p><p><figure><img src=/images/review-coc-na/board.jpg alt loading=lazy></figure></p><h1 id=文化差异>文化差异</h1><p>在介绍具体议题之前，我想先简单介绍下与会过程中感受到的中美间的文化差异，以飨读者。</p><p>和国内会议类似，第一天议程结束后有个晚宴（event reception），但这个晚宴可不“简单”，不是传统的晚宴，社交属性更重些。场地内会有几个比较高的圆桌，大家在旁边拿完东西后就可以找感兴趣的人开聊。对于第一次参见这种会议的我来说，其实有是些蒙的，和一同去的同事默默站在一角观望可以插入的场子，但看着周边人群在慷慨激昂的谈论时，发现自己不能很轻松地加入：一是语言问题；二就是文化差异。</p><p>在转了几圈后，发现几个国人面孔，通过沟通知道了他们都来自苹果公司，苹果是这次的大赞助商，所以他们大概来了四五十人！只不过组比较多，所以很多人也是第一次见面。听他们说这种聚会形式在美国挺常见的，他们虽然在美已经多年，语言早已不再是什么问题，但碍于文化差异，他们也不能很轻松的融入进去。</p><p>通过交流，了解到苹果公司内很多基建都是基于 Apache 的项目构建，而且最近几年他们在开源上的力度也越来越大，印象较深的就是 Swift 语言，其中一个女士貌似是 Swift 的 team member，她看到我穿的是带有 Rust logo 的衣服，就建议我尝试下 Swift，这两个语言设计理念类似，但 Swift 更简单，而且为了避免苹果一家独大，他们已经把 Swift 迁移到独立的 <a href=https://github.com/swiftlang/>GitHub 组织</a>上去。此外，Swift 也不仅仅是苹果平台的特定语言，他们也花了很多精力来保证 Swift 在 Linux/Windows 上也能完美的运行。</p><p>可以想到，苹果把 Swift 定位为通用语言，既可以为苹果生态服务，也是更长远的战略布局。通过通用化，苹果能够扩大 Swift 的生态影响力，吸引更多开发者进入其体系，同时为跨平台的未来做好准备。现在想想，华为的<a href=https://cangjie-lang.cn/>仓颉语言</a> 也是类似思路。打造生态前期投入肯定是巨大的，需要长期投入和耐心的过程，但对大企业来说，这种投入实际上是一种战略性资源配置，目的就是建立长期的技术竞争力。</p><p>在会场中，我也有幸见到了 <a href=https://www.databass.dev/>Database Internals</a> 一书的作者 Alex Petrov（目前在苹果工作），给他简单介绍了下 HoraeDB，他的本能反应就是 Very cool！在国内我还真没遇到类似回答。</p><h1 id=演讲介绍>演讲介绍</h1><p>接下来就介绍几个笔者印象比较深的演讲，由于没有演讲时的 PPT，因此下面的介绍是我根据印象中的关键词搜索整理的，仅供大家参考。</p><h2 id=optimizing-apache-horaedb-for-high-cardinality-metrics-at-antgroup>Optimizing Apache HoraeDB for High-Cardinality Metrics at AntGroup</h2><p>这是我带来的演讲，介绍了 HoraeDB 重点解决的问题，以及对应思路和方法。核心一点就是通过 AP 领域的思路（剪枝、<a href=https://en.wikipedia.org/wiki/Block_Range_Index>BRIN</a>）来解决高基数时间线的问题，细节可以参考本次分享的<a href=https://downloads.apache.org/incubator/horaedb/slides/20241010-Optimizing%20Apache%20HoraeDB%20for%20High-Cardinality%20Metrics%20at%20AntGroup.pdf>PPT</a>。</p><p>现在的版本我们其实也遇到了些新问题。目前的引擎在以时序分析为主的场景来说运行的会比较好，但在传统的时序告警领域工作的并不是很好，主要在于两点：</p><ol><li>一次查询的代价太大，在查询引擎中采用了通用的 Arrow 格式，反而导致丢失了针对时序特点的优化</li><li>采用表作为基本数据组织方式过于严格，时序本来是一种弱 Schema 的场景，而提前定义好固定模式的表显然是一种“退步”，另外表作为资源管理单位，也限制了单机能够承载的表数量。</li></ol><p>因此在后续的版本中，我们吸取了现在引擎（即目前的 Analytic Engine）的教训，打算重新设计一种引擎（称为：Metric Engine）来解决高基数的问题。</p><p>新引擎正在紧锣密鼓的开发中，感兴趣的读者可以参考<a href=https://github.com/apache/horaedb/blob/main/docs/rfcs/20240827-metric-engine.md>这里的 RFC</a> 来了解设计思路。在后续的版本发布时，我们也会重点强调新引擎的开发进度。</p><h2 id=blazingly-fast-introduction-to-apache-fury-serialization>Blazingly-Fast: Introduction to Apache Fury Serialization</h2><p>演讲者是 Fury 项目的发起者 Shawn Yang，也是我的同事。如标题所说，Fury 定位的就是高效的序列化，已经在诸多系统中被使用（参见：<a href=https://github.com/apache/fury/issues/1766>Who is Using Apache Fury?</a>），并取得显著提升。</p><p>一直以为序列化是个已经解决的问题，了解了 Fury 后才了解到这个领域的问题。举个简单的例子，对于常见的 Protobuf 来说， 在序列化一个数组的 Message 时，Message 的元数据会序列化多次，但如果应用层能够保证每个字段都不会缺失，那么这样就是有些浪费的，在 Fury 中就可以 <a href=https://fury.apache.org/docs/specification/fury_xlang_serialization_spec/#schema-consistent>schema consistent</a> 这种模式来避免这种冗余。</p><p><figure><img src=/images/review-coc-na/fury-overview.jpg alt="Apache Fury Overview" loading=lazy><figcaption><center>Apache Fury Overview</center></figcaption></figure></p><h2 id=making-apache-kafka-even-faster-and-more-scalablehttpswwwslidesharenetslideshowmaking-apache-kafka-even-faster-and-more-scalable2726456692><a href=https://www.slideshare.net/slideshow/making-apache-kafka-even-faster-and-more-scalable/272645669#2>Making Apache Kafka even faster and more scalable</a></h2><p>Kafka 是一种高吞吐量的分布式流处理平台，尽管十分流行，但近些年随着使用场景的复杂，挑战者也不少，比如：</p><ul><li>主打云原生的 Pulsar</li><li>金融级可靠性的 RocketMQ</li><li>强调低延迟的 RabbitMQ</li></ul><p>这个议题的嘉宾来自 <a href=https://www.instaclustr.com/>Instaclustr</a>，提供托管的 Kafka 服务。他主要从两方面来讲述了对 Kafka 的改进：</p><ol><li>使用 KRaft 替换 ZooKeeper，这个主要是为扩大分区数考虑，分区是 Kafka 里很重要一概念，是进行并发读写的基本单位，在嘉宾的测试中，基于 ZK 的版本最高可以达到八万个分区，而基于 KRaft 的版本可以达到近两百万的分区。细节可以参考：<a href=https://developer.confluent.io/courses/architecture/control-plane/>Kafka Control Plane: ZooKeeper, KRaft, and Managing Data</a>。</li><li>分层存储（Tiered storage），冷热数据分离的标配，通过将访问低频的数据移动到 S3 上可以显著降低成本。<a href=https://cwiki.apache.org/confluence/display/KAFKA/KIP-405%3A+Kafka+Tiered+Storage>KIP-405</a> 最早在 2020 年就提出来了，3.6.1(2023) 发布到期访问版，3.8.0(2024) 发布 V1 正式版。</li></ol><h2 id=tomcat-11-and-jakarta-ee-11>Tomcat 11 and Jakarta EE 11</h2><p>Tomcat 是 Java Web 开发领域的一个经典开源项目，不仅仅是一个 Web 服务器和 Servlet 容器，更承载了许多开发者的回忆。虽然不写 Java 很多年了，但看着到这个项目还是挺亲切的，毕竟谁能不喜欢这只 Tom 猫呢？</p><p><figure><img src=/images/review-coc-na/tomcat-cupcake.jpg alt loading=lazy></figure></p><p>这个议题里分享了最新的 11 版本中的特性：</p><ul><li>最小支持的 Java 版本升级到 17</li><li>通过 <a href=https://docs.oracle.com/en/java/javase/21/core/foreign-function-and-memory-api.html>FFM</a> 支持与 OpenSSL 集成（需要 Java 22+）</li><li>增强基于虚拟线程的执行器（VirtualThreadExecutor）</li><li>日志增加 JSON 输出格式</li><li>移除以下功能<ul><li>Security Manager support</li><li>32-bit Windows support</li><li>HTTP/2 Server push support</li></ul></li></ul><p>都是些与时俱进的功能，记得在很早<a href=https://evertpot.com/http-2-push-is-dead/>就看过</a> HTTP2 的 Push 功能有些鸡肋，这个案例说明了一个重要的原则：有时看起来很好的技术特性，在实际应用中可能并不如预期。</p><h2 id=cassandra>Cassandra</h2><p>Cassandra 议题这次会议上非常多，印象中有一个房间一整天的议题都是与之相关，没想过 Cassandra 能有这么流行，甚至还有一个 BYOT（Bring Your Own Topic） 环节，来让大家交流 Cassandra 使用心得。下面是几个重量的议题：</p><ul><li>The Road to 20 Terabytes per Node: Overcoming Cassandra&rsquo;s Storage Density Challenges</li><li>Apache Cassandra as a Transactional Database</li><li>Lessons from (Probably) the World’s Largest Kafka and Cassandra Migration<ul><li><a href=https://github.com/instaclustr/instaclustr-minotaur>instaclustr/instaclustr-minotaur: Tooling for consistent rebuilding of a Cassandra cluster</a></li></ul></li></ul><p>遗憾的是，由于演讲者说话速度较快，再加上我对 Cassandra 了解较少，大部分议题未能完全领会，只能课下再下功夫了解了。但尽管如此，还是对一个议题印象颇深，是一个由满脸白胡子的嘉宾分享的关于在查询中实现分页的演讲，很工程的一个问题，演讲者围绕其对性能的影响、潜在的误用风险等多个维度进行了详尽剖析，展现出深厚的专业功底和匠人精神。</p><p><figure><img src=/images/review-coc-na/cassandra-paging.jpg alt loading=lazy></figure></p><h2 id=odbc-takes-an-arrow-to-the-knee-adbc>ODBC takes an Arrow to the knee: ADBC</h2><p>Apache Arrow 是一个跨语言的内存数据处理框架，通过标准化内存中的列式数据表示来实现高效的数据交换和处理。 和 JDBC 类似，<a href=https://arrow.apache.org/adbc/current/index.html>ADBC</a> 是基于 Arrow 的、供应商中立的 API，方便用户高效查询支持 Arrow 的数据库，比如 <a href=https://duckdb.org/2023/08/04/adbc.html>DuckDB</a>，就有 38 倍的提升！</p><h2 id=其他>其他</h2><ul><li><p><a href=https://yunikorn.apache.org/>Apache YuniKorn</a>，云原生时代的资源调度器，和现场一个苹果的朋友聊，他们就在用它来调度他们 AI 相关的任务！</p></li><li><p><a href=https://prql-lang.org/>PRQL</a>（Pipelined Relational Query Language），另一个查询语言，相比 SQL 功能更强大、简洁。示例：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:green;font-weight:700>from</span><span style=color:#bbb> </span>tracks<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>filter<span style=color:#bbb> </span>artist<span style=color:#bbb> </span><span style=color:#666>==</span><span style=color:#bbb> </span><span style=color:#ba2121>&#34;Bob Marley&#34;</span><span style=color:#bbb>  </span><span style=color:#666>#</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>Each</span><span style=color:#bbb> </span>line<span style=color:#bbb> </span><span style=color:green;font-weight:700>transforms</span><span style=color:#bbb> </span>the<span style=color:#bbb> </span>previous<span style=color:#bbb> </span><span style=color:green;font-weight:700>result</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>aggregate</span><span style=color:#bbb> </span><span>{</span><span style=color:#bbb>                    </span><span style=color:#666>#</span><span style=color:#bbb> </span><span style=color:#666>`</span><span style=color:green;font-weight:700>aggregate</span><span style=color:#666>`</span><span style=color:#bbb> </span>reduces<span style=color:#bbb> </span><span style=color:green;font-weight:700>each</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>column</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>to</span><span style=color:#bbb> </span>a<span style=color:#bbb> </span>value<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>plays<span style=color:#bbb>    </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>sum</span><span style=color:#bbb> </span>plays,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>longest<span style=color:#bbb>  </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>max</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>length</span>,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>shortest<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>min</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>length</span>,<span style=color:#bbb>       </span><span style=color:#666>#</span><span style=color:#bbb> </span><span style=color:green;font-weight:700>Trailing</span><span style=color:#bbb> </span>commas<span style=color:#bbb> </span><span style=color:green;font-weight:700>are</span><span style=color:#bbb> </span>allowed<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span>}</span><span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>对应的 SQL 如下：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:green;font-weight:700>SELECT</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>COALESCE(<span style=color:green;font-weight:700>SUM</span>(plays),<span style=color:#bbb> </span><span style=color:#666>0</span>)<span style=color:#bbb> </span><span style=color:green;font-weight:700>AS</span><span style=color:#bbb> </span>plays,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>MAX</span>(<span style=color:green;font-weight:700>length</span>)<span style=color:#bbb> </span><span style=color:green;font-weight:700>AS</span><span style=color:#bbb> </span>longest,<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>MIN</span>(<span style=color:green;font-weight:700>length</span>)<span style=color:#bbb> </span><span style=color:green;font-weight:700>AS</span><span style=color:#bbb> </span>shortest<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>FROM</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>tracks<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>WHERE</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>  </span>artist<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#ba2121>&#39;Bob Marley&#39;</span><span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div></li></ul><h1 id=总结>总结</h1><p>参加这次 Apache 大会，HoraeDB 项目算是首次走向国际舞台。与那些已广为人知、炙手可热的项目相比，我们仍然任重而道远。 一个开源项目能够在核心开发团队不断更迭的情况下持续演进，本身就是极其难能可贵的。在 Apache 基金会，我看到了诸多值得学习的典范。</p><p>归根结底，软件的生命力在于人，唯有不断壮大社区，源源不断地吸引卓越人才，才能确保社区生生不息、薪火相传。 HoraeDB 目前正处于起步阶段，期许通过社区的持续努力和协作，最终能打造出一个世界一流的云原生时序数据库，在开源的广阔天地中绽放光彩。</p><p>欢迎感兴趣的朋友加入我们：<a href=https://horaedb.apache.org/community/>https://horaedb.apache.org/community/</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-e4fd354ddb7d7e5a7570c033405812c5>2.1.0 版本发布</h1><div class="td-byline mb-4"><time datetime=2024-11-18 class=text-body-secondary>2024-11-18</time></div><p>Apache HoraeDB（孵化中）团队很高兴地宣布，v2.1.0 版本已于 2024-11-18 发布，这个版本解决了 60 多个问题，并且包括两个主要功能：</p><h2 id=1-引入基于本地磁盘的新-wal-实现>1. 引入基于本地磁盘的新 WAL 实现</h2><p>在之前的版本中，有一个基于 RocksDB 的 WAL。虽然它在大多数情况下运行良好，但存在以下问题：</p><ul><li>从源代码编译可能是一项具有挑战性的任务，尤其是因为 RocksDB 主要是用 C++ 编写的。</li><li>对于 WAL 而言，RocksDB 可能有些矫枉过正。如果你对 RocksDB 不熟悉，那么对它进行调整可能会非常具有挑战性。</li></ul><p>通过这个新的 WAL，就很好的解决了上面两个问题，而且在性能测试结果，新 WAL 的表现略优于之前的实现，给以后的优化打下了结实的基础。</p><p><figure><img src=/images/local-wal-write.png alt=写入速率对比 loading=lazy><figcaption><center>写入速率对比</center></figcaption></figure><figure><img src=/images/local-wal-replay.png alt=回放速率对比 loading=lazy><figcaption><center>回放速率对比</center></figcaption></figure></p><p>感兴趣的朋友可以参考<a href=https://horaedb.apache.org/cn/docs/design/wal_on_disk/>这里的设计文档</a>了解更多这个特性的细节。</p><h2 id=2-使用-apache-opendal-访问对象存储>2. 使用 Apache OpenDAL 访问对象存储</h2><p>Apache OpenDAL 是一个为访问各种数据存储后端提供统一 API 的项目。以下是一些主要优势：</p><ul><li>统一的 API：OpenDAL 为访问 AWS S3、Azure Blob Storage 和本地文件系统等不同存储后端提供了一致、统一的 API。</li><li>优化效率：OpenDAL 在构建时就考虑到了性能。它包括确保高效数据访问和操作的优化功能，使其适用于高性能应用程序。</li><li>全面的文档：该项目提供了详细的文档，使开发人员更容易上手并了解如何有效地使用该库。</li></ul><p>在较新版本的 OpenDAL 中，提供了 <code>object_store</code> 的<a href=https://github.com/apache/opendal/tree/main/integrations/object_store>集成</a>，这非常有利于 HoraeDB 的代码迁移，上层使用的 API 几乎没有发生变化，只需要将对象存储抽象为统一的 OpenDAL operator：</p><div class=highlight><div style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#408080;font-style:italic>// Create a new operator
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>operator<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Operator::new(S3::default())<span style=color:#666>?</span>.finish();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#408080;font-style:italic>// Create a new object store
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span><span style=color:green;font-weight:700>let</span><span style=color:#bbb> </span>object_store<span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span>Arc::new(OpendalStore::new(operator));<span style=color:#bbb>
</span></span></span></code></pre></td></tr></table></div></div><p>此外，由于 Apache OpenDAL 实现的 <code>object_store</code> 是基于最新版本的，相较于 HoraeDB 之前使用的版本，<code>object_store</code> 接口发生了变化，为了保证本次升级范围尽量可控，我们选择对其进行兼容。</p><p>对新 API 适配的过程中， <code>put_multipart</code> 接口变化最大，因此主要的适配逻辑也在这里，HoraeDB 的做法是：对底层的 <code>put_multipart</code> 接口进行了封装，保证上层代码无修改，具体细节可参考：</p><ul><li><a href=https://github.com/apache/horaedb/blob/v2.1.0/src/components/object_store/src/multi_part.rs>https://github.com/apache/horaedb/blob/v2.1.0/src/components/object_store/src/multi_part.rs</a></li></ul><blockquote><p>说明：在 parquet 最新版本中，写入路径上对新 <code>put_multipart</code> 接口适配程度较高，若用户使用的 parquet 版本 >= 52.0.0，则无需进行适配，若是更老的版本，可参考 HoraeDB 的适配实现。</p></blockquote><h2 id=下载>下载</h2><p>见<a href=/cn/downloads/>下载页面</a>。</p><h2 id=总结>总结</h2><p>其他错误修复和改进请参见此处：
<a href=https://github.com/apache/horaedb/releases/tag/v2.1.0>https://github.com/apache/horaedb/releases/tag/v2.1.0</a></p><blockquote><p>我们一如既往地热忱欢迎您加入<a href=/community>我们的社区</a>，分享您的真知灼见。</p></blockquote></div><div class=td-content style=page-break-before:always><h1 id=pg-c982cc77916f2fc8647c387a0a7af271>Apache HoraeDB 与你相约北京理工大学</h1><div class="td-byline mb-4"><time datetime=2024-10-24 class=text-body-secondary>2024-10-24</time></div><p>在数字化转型的浪潮中，开源软件人才的培养是信息技术创新发展的重要根基，高校学子作为我国开源生态的源头活水备受重视。10 月 26 日 CCF 开源发展委员会“开源高校行”活动将走进北京理工大学与高校师生交流分享，共同推进开源教育，建立产学研用一体化开源创新人才培养体系。诚邀您的参与！</p><p>Apache HoraeDB PPMC 成员 <a href=https://github.com/chunshao90>任春韶</a> 将带来 Optimizing Apache HoraeDB for High-Cardinality Metrics at AntGroup 为题的分享，欢迎在场的朋友前来观看、交流 🤝</p><h1 id=活动须知>活动须知</h1><ul><li>时间：2024 年 10 月 26 号 18:30-20:05</li><li>地点：北京理工大学良乡校区文萃楼 I 405</li></ul><p><figure><img src=/images/ccf-bit.jpg alt loading=lazy></figure></p></div><div class=td-content style=page-break-before:always><h1 id=pg-67741b823b6fd9d5e9cee92ab233780e>Apache HoraeDB 与你相约 Community Over Code 北美大会</h1><div class="td-byline mb-4"><time datetime=2024-10-07 class=text-body-secondary>2024-10-07</time></div><p>在数字化浪潮席卷全球的今天，开源软件已成为推动科技创新的核心驱动力。ApacheCon 作为全球最具影响力的开源盛会之一，每年都吸引着来自世界各地的开发者、技术专家和企业代表。</p><p>这次 <a href=https://communityovercode.org/>Community Over Code</a> 北美大会将在丹佛君悦大酒店举行为期四天的现场会议，重点讨论搜索、大数据、物联网、社区、地理空间、金融技术和许多其他主题。</p><p>Apache HoraeDB PPMC 成员 <a href=https://github.com/jiacai2050>jiacai2050</a> 将带来 Optimizing Apache HoraeDB for High-Cardinality Metrics at AntGroup 为题的分享，欢迎在场的朋友前来观看、交流 🤝</p><p><figure><img src=/images/coc-na-denver.jpg alt loading=lazy></figure></p><p>更多议程内容，可以参考官网的 <a href=https://communityovercode.org/schedule/>Sessions Schedule
</a>。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-dc5fe0a66ed04232a469f74ae1148c11>欢迎 Apache HoraeDB 新晋 Committer： 鲍金日</h1><div class="td-byline mb-4"><time datetime=2024-09-13 class=text-body-secondary>2024-09-13</time></div><p>各位开发者们，</p><p>今天很高兴宣布，HoraeDB 社区新增了一个 committer：<a href=https://github.com/baojinri>鲍金日</a>，他之前的贡献得到 HoraeDB PPMC 的<a href=https://lists.apache.org/thread/kqp9jl325b5crz9kt9t3o2bkzplhm7oz>一致认可</a>，并于 2024-09-10 投票成为 committer，感谢他一直以来的贡献。下面是他的贡献记录：</p><ul><li>33 PRs to <a href="https://github.com/apache/horaedb/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">main repo</a></li><li>4 PRs to <a href="https://github.com/apache/horaedb-docs/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">docs repo</a></li><li>13 PRs to <a href="https://github.com/apache/incubator-horaedb-meta/pulls?q=is%3Apr+author%3Abaojinri+is%3Aclosed">meta repo</a></li></ul><p>需要明确一点，成为 committer 并不需要额外做什么，主要是方便开发者后续可以更便利（有仓库写权限）地参与社区贡献。</p><p>最后，再次感谢鲍金日一直以来对社区的付出，衷心希望他能继续贡献，共同见证社区的成长。</p><p>欢迎更多感兴趣的朋友加入我们的<a href=/community>社区</a>，与我们近距离交流。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b432dd3ce58969edcac72ac8dda30692>预告：第一次线上会议</h1><div class="td-byline mb-4"><time datetime=2024-08-21 class=text-body-secondary>2024-08-21</time></div><p>各位开发者们，</p><p>欢迎大家参加我们的第一次线上会议！这次会议标志着我们团队在项目开发过程中的一个重要里程碑，也是我们合作共赢的开始。</p><h1 id=会议目的>会议目的</h1><p>这次会议的主要目的是让大家相互认识，了解项目的总体目标，讨论开发的初步计划，并明确各自的角色和责任。我们希望通过此次会议，能够为接下来的工作奠定坚实的基础，并建立起一个高效、透明的沟通机制。</p><h1 id=主要议题>主要议题</h1><ol><li>Apache HoraeDB 项目现状介绍</li><li>新 Metric Engine 设计方案介绍</li></ol><h1 id=参会方式>参会方式</h1><p>入会链接：<a href=https://meeting.dingtalk.com/j/011mRkbIdqL>https://meeting.dingtalk.com/j/011mRkbIdqL</a></p><p>可通过浏览器直接入会，无需下载钉钉。</p><p>也欢迎感兴趣的朋友可以<a href=/community>加入我们的社区</a>（钉钉群、微信公众号等），获取社区最新动态。</p><h1 id=会议时间>会议时间</h1><p>2024 年 08 月 27 日 周二，21:00-22:00 (GMT+8)</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class=td-footer__center>Apache HoraeDB is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.<hr><span class=td-footer__copyright>&copy;
2023&ndash;2024
<span class=td-footer__authors><p>The Apache Software Foundation, Licensed under the Apache License, Version 2.0.</p><p>Apache, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.</p></span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div><hr><div class="row mx-md-2"><div class=td-footer__center><span class=td-footer__copyright>Found a bug in website? <a href=https://github.com/apache/horaedb-docs/issues/new>Open an issue</a> or <a href=https://github.com/apache/horaedb-docs/pulls>submit a pull request</a> on GitHub.</span></div></div><hr></div></footer></div><script src=/js/main.min.f72d00502781aaf278a14088eb2356b1ba2a05ad698a0c43fe86314d74ceab56.js integrity="sha256-9y0AUCeBqvJ4oUCI6yNWsboqBa1pigxD/oYxTXTOq1Y=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>